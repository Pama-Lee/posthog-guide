"use strict";(self.webpackChunkposthog_guide=self.webpackChunkposthog_guide||[]).push([[95],{81546:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>a,frontMatter:()=>r,metadata:()=>c,toc:()=>t});const c=JSON.parse('{"id":"\ud83d\ude80 \u90e8\u7f72/developing-locally","title":"\u672c\u5730\u5f00\u53d1","description":"\u2757\ufe0f \u672c\u6307\u5357\u4ec5\u9002\u7528\u4e8e PostHog \u672c\u8eab\u7684\u5f00\u53d1\u3002\u5982\u679c\u4f60\u60f3\u90e8\u7f72 PostHog \u7528\u4e8e\u4ea7\u54c1\u5206\u6790\u9700\u6c42\uff0c\u8bf7\u524d\u5f80\u81ea\u6258\u7ba1 PostHog\u3002","source":"@site/docs/\ud83d\ude80 \u90e8\u7f72/developing-locally.md","sourceDirName":"\ud83d\ude80 \u90e8\u7f72","slug":"/\ud83d\ude80 \u90e8\u7f72/developing-locally","permalink":"/posthog-guide/docs/\ud83d\ude80 \u90e8\u7f72/developing-locally","draft":false,"unlisted":false,"editUrl":"https://github.com/pama-lee/posthog-guide/tree/main/docs/\ud83d\ude80 \u90e8\u7f72/developing-locally.md","tags":[],"version":"current","frontMatter":{"title":"\u672c\u5730\u5f00\u53d1","sidebar":"Docs","showTitle":true},"sidebar":"tutorialSidebar","previous":{"title":"Cloud \u96c6\u7fa4\u67b6\u6784","permalink":"/posthog-guide/docs/\ud83d\ude80 \u90e8\u7f72/cloud-cluster"},"next":{"title":"\u4f7f\u7528 Nomad \u90e8\u7f72 PostHog","permalink":"/posthog-guide/docs/\ud83d\ude80 \u90e8\u7f72/nomad"}}');var l=n(74848),o=n(28453);const r={title:"\u672c\u5730\u5f00\u53d1",sidebar:"Docs",showTitle:!0},i=void 0,d={},t=[{value:"PostHog \u5185\u90e8\u7ed3\u6784\u662f\u4ec0\u4e48\u6837\u7684\uff1f",id:"posthog-\u5185\u90e8\u7ed3\u6784\u662f\u4ec0\u4e48\u6837\u7684",level:2},{value:"\u9009\u9879\u4e00\uff1a\u4f7f\u7528 Codespaces \u5f00\u53d1",id:"\u9009\u9879\u4e00\u4f7f\u7528-codespaces-\u5f00\u53d1",level:2},{value:"\u9009\u9879\u4e8c\uff1a\u672c\u5730\u5f00\u53d1",id:"\u9009\u9879\u4e8c\u672c\u5730\u5f00\u53d1",level:2},{value:"\u5148\u51b3\u6761\u4ef6",id:"\u5148\u51b3\u6761\u4ef6",level:3},{value:"macOS",id:"macos",level:4},{value:"Ubuntu",id:"ubuntu",level:4},{value:"\u514b\u9686\u4ed3\u5e93",id:"\u514b\u9686\u4ed3\u5e93",level:4},{value:"\u5373\u65f6\u8bbe\u7f6e",id:"\u5373\u65f6\u8bbe\u7f6e",level:3},{value:"\u624b\u52a8\u8bbe\u7f6e",id:"\u624b\u52a8\u8bbe\u7f6e",level:3},{value:"1. \u542f\u52a8\u5916\u90e8\u670d\u52a1",id:"1-\u542f\u52a8\u5916\u90e8\u670d\u52a1",level:4},{value:"5. \u51c6\u5907 Django \u670d\u52a1\u5668",id:"5-\u51c6\u5907-django-\u670d\u52a1\u5668",level:4},{value:"6. \u51c6\u5907\u6570\u636e\u5e93",id:"6-\u51c6\u5907\u6570\u636e\u5e93",level:4},{value:"7. \u542f\u52a8 PostHog",id:"7-\u542f\u52a8-posthog",level:4},{value:"8. \u5f00\u53d1",id:"8-\u5f00\u53d1",level:4},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5",level:2},{value:"\u524d\u7aef",id:"\u524d\u7aef",level:3},{value:"\u540e\u7aef",id:"\u540e\u7aef",level:3},{value:"\u7aef\u5230\u7aef",id:"\u7aef\u5230\u7aef",level:3},{value:"\u989d\u5916\uff1a\u4f7f\u7528\u7279\u6027\u6807\u5fd7",id:"\u989d\u5916\u4f7f\u7528\u7279\u6027\u6807\u5fd7",level:2},{value:"\u989d\u5916\uff1a\u4f7f\u7528 VS Code \u8c03\u8bd5",id:"\u989d\u5916\u4f7f\u7528-vs-code-\u8c03\u8bd5",level:2},{value:"Extra: Debugging the backend in PyCharm",id:"extra-debugging-the-backend-in-pycharm",level:2},{value:"\u8bbe\u7f6e PyCharm",id:"\u8bbe\u7f6e-pycharm",level:3},{value:"\u542f\u52a8\u8c03\u8bd5\u73af\u5883",id:"\u542f\u52a8\u8c03\u8bd5\u73af\u5883",level:3},{value:"Extra: Accessing Postgres",id:"extra-accessing-postgres",level:2},{value:"Extra: Accessing the Django Admin",id:"extra-accessing-the-django-admin",level:2},{value:"\u989d\u5916\uff1a\u5f00\u53d1\u4ed8\u8d39\u529f\u80fd\uff08\u4ec5\u9650 PostHog \u5458\u5de5\uff09",id:"\u989d\u5916\u5f00\u53d1\u4ed8\u8d39\u529f\u80fd\u4ec5\u9650-posthog-\u5458\u5de5",level:2},{value:"Extra: Working with the data warehouse and a MySQL source",id:"extra-working-with-the-data-warehouse-and-a-mysql-source",level:2}];function h(e){const s={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["\u2757\ufe0f \u672c\u6307\u5357\u4ec5\u9002\u7528\u4e8e PostHog \u672c\u8eab\u7684\u5f00\u53d1\u3002\u5982\u679c\u4f60\u60f3\u90e8\u7f72 PostHog \u7528\u4e8e\u4ea7\u54c1\u5206\u6790\u9700\u6c42\uff0c\u8bf7\u524d\u5f80",(0,l.jsx)(s.a,{href:"/docs/self-host",children:"\u81ea\u6258\u7ba1 PostHog"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"posthog-\u5185\u90e8\u7ed3\u6784\u662f\u4ec0\u4e48\u6837\u7684",children:"PostHog \u5185\u90e8\u7ed3\u6784\u662f\u4ec0\u4e48\u6837\u7684\uff1f"}),"\n",(0,l.jsx)(s.p,{children:"\u5728\u5f00\u59cb\u8bbe\u7f6e\u4e4b\u524d\uff0c\u8ba9\u6211\u4eec\u5148\u4e86\u89e3 PostHog \u7684\u7ec4\u6210\u90e8\u5206\u3002"}),"\n",(0,l.jsx)(s.p,{children:"\u8be5\u5e94\u7528\u7531 4 \u4e2a\u540c\u65f6\u8fd0\u884c\u7684\u7ec4\u4ef6\u7ec4\u6210\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Celery worker\uff08\u5904\u7406\u540e\u53f0\u4efb\u52a1\uff09"}),"\n",(0,l.jsx)(s.li,{children:"Django \u670d\u52a1\u5668"}),"\n",(0,l.jsx)(s.li,{children:"Node.js \u63d2\u4ef6\u670d\u52a1\u5668\uff08\u5904\u7406\u4e8b\u4ef6\u63a5\u6536\u548c\u5e94\u7528/\u63d2\u4ef6\uff09"}),"\n",(0,l.jsx)(s.li,{children:"\u4f7f\u7528 Node.js \u6784\u5efa\u7684 React \u524d\u7aef"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u4e9b\u7ec4\u4ef6\u4f9d\u8d56\u4e8e\u4ee5\u4e0b\u5916\u90e8\u670d\u52a1\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"ClickHouse \u2013 \u7528\u4e8e\u5b58\u50a8\u5927\u6570\u636e\uff08\u4e8b\u4ef6\u3001\u7528\u6237\u3001\u5206\u6790\u67e5\u8be2\uff09"}),"\n",(0,l.jsx)(s.li,{children:"Kafka \u2013 \u7528\u4e8e\u4e8b\u4ef6\u63a5\u6536\u961f\u5217"}),"\n",(0,l.jsx)(s.li,{children:"MinIO \u2013 \u7528\u4e8e\u5b58\u50a8\u6587\u4ef6\uff08\u4f1a\u8bdd\u5f55\u5236\u3001\u6587\u4ef6\u5bfc\u51fa\uff09"}),"\n",(0,l.jsx)(s.li,{children:"PostgreSQL \u2013 \u7528\u4e8e\u5b58\u50a8\u666e\u901a\u6570\u636e\uff08\u7528\u6237\u3001\u9879\u76ee\u3001\u4fdd\u5b58\u7684\u6d1e\u5bdf\uff09"}),"\n",(0,l.jsx)(s.li,{children:"Redis \u2013 \u7528\u4e8e\u7f13\u5b58\u548c\u670d\u52a1\u95f4\u901a\u4fe1"}),"\n",(0,l.jsx)(s.li,{children:"Zookeeper \u2013 \u7528\u4e8e\u534f\u8c03 Kafka \u548c ClickHouse \u96c6\u7fa4"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u5728\u542f\u52a8 PostHog \u5f00\u53d1\u5b9e\u4f8b\u65f6\uff0c\u6211\u4eec\u63a8\u8350\u4ee5\u4e0b\u914d\u7f6e\uff1a"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\u5916\u90e8\u670d\u52a1\u901a\u8fc7 ",(0,l.jsx)(s.code,{children:"docker compose"})," \u5728 Docker \u4e2d\u8fd0\u884c"]}),"\n",(0,l.jsx)(s.li,{children:"PostHog \u672c\u8eab\u5728\u4e3b\u673a\uff08\u4f60\u7684\u7cfb\u7edf\uff09\u4e0a\u8fd0\u884c"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u5c31\u662f\u6211\u4eec\u5728\u4e0b\u9762\u7684\u6307\u5357\u4e2d\u5c06\u8981\u4f7f\u7528\u7684\u914d\u7f6e\u3002"}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"\u6280\u672f\u4e0a\u4e5f\u53ef\u4ee5\u5b8c\u5168\u5728 Docker \u4e2d\u8fd0\u884c PostHog\uff0c\u4f46\u540c\u6b65\u66f4\u6539\u4f1a\u53d8\u5f97\u66f4\u6162\uff0c\u800c\u4e14\u4e3a\u4e86\u5f00\u53d1\uff0c\u4f60\u4ecd\u7136\u9700\u8981\u5728\u4e3b\u673a\u4e0a\u5b89\u88c5 PostHog \u4f9d\u8d56\u9879\uff08\u5982\u683c\u5f0f\u5316\u6216\u7c7b\u578b\u68c0\u67e5\u5de5\u5177\uff09\u3002\n\u53e6\u4e00\u79cd\u65b9\u5f0f - \u5b8c\u5168\u5728\u4e3b\u673a\u4e0a\u8fd0\u884c\u6240\u6709\u5185\u5bb9\uff0c\u7531\u4e8e\u4ece\u5934\u5f00\u59cb\u5b9e\u4f8b\u5316 Kafka \u6216 ClickHouse \u6d89\u53ca\u7684\u590d\u6742\u6027\u8f83\u5927\uff0c\u8fd9\u5728\u5b9e\u8df5\u4e2d\u662f\u4e0d\u53ef\u884c\u7684\u3002"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u672c\u6307\u5357\u5047\u8bbe\u4f60\u8fd0\u884c\u7684\u662f macOS \u6216\u5f53\u524d\u7684 Ubuntu Linux LTS\uff0824.04\uff09\u3002"}),"\n",(0,l.jsxs)(s.p,{children:["\u5bf9\u4e8e\u5176\u4ed6 Linux \u53d1\u884c\u7248\uff0c\u8bf7\u6839\u636e\u9700\u8981\u8c03\u6574\u6b65\u9aa4\uff08\u4f8b\u5982\uff0c\u4f7f\u7528 ",(0,l.jsx)(s.code,{children:"dnf"})," \u6216 ",(0,l.jsx)(s.code,{children:"pacman"})," \u4ee3\u66ff ",(0,l.jsx)(s.code,{children:"apt"}),"\uff09\u3002"]}),"\n",(0,l.jsx)(s.p,{children:"Windows \u672c\u8eab\u4e0d\u652f\u6301\u3002\u4f46\u662f\uff0cWindows \u7528\u6237\u53ef\u4ee5\u8fd0\u884c Linux \u865a\u62df\u673a\u3002\u63a8\u8350\u4f7f\u7528\u6700\u65b0\u7684 Ubuntu LTS Desktop\u3002\uff08\u4e0d\u63a8\u8350\u4f7f\u7528 Ubuntu Server\uff0c\u56e0\u4e3a\u8c03\u8bd5\u524d\u7aef\u9700\u8981\u80fd\u591f\u8bbf\u95ee localhost \u7684\u6d4f\u89c8\u5668\u3002\uff09"}),"\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u8fd9\u91cc\u7684\u4e00\u4e9b\u6b65\u9aa4\u5df2\u7ecf\u8fc7\u65f6\uff0c\u8bf7\u544a\u8bc9\u6211\u4eec - \u6b22\u8fce",(0,l.jsx)(s.a,{href:"https://github.com/PostHog/posthog.com/blob/master/contents/handbook/engineering/developing-locally.md",children:"\u63d0\u4ea4\u8865\u4e01"}),"\uff01"]}),"\n",(0,l.jsx)(s.h2,{id:"\u9009\u9879\u4e00\u4f7f\u7528-codespaces-\u5f00\u53d1",children:"\u9009\u9879\u4e00\uff1a\u4f7f\u7528 Codespaces \u5f00\u53d1"}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u662f\u4e00\u4e2a\u66f4\u5feb\u901f\u7684\u5165\u95e8\u9009\u9879\u3002\u5982\u679c\u4f60\u4e0d\u60f3\u6216\u65e0\u6cd5\u4f7f\u7528 Codespaces\uff0c\u8bf7\u7ee7\u7eed\u9605\u8bfb\u4e0b\u4e00\u8282\u3002"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\u521b\u5efa\u4f60\u7684 codespace\u3002\n",(0,l.jsx)(s.img,{src:"https://user-images.githubusercontent.com/890921/231489405-cb2010b4-d9e3-4837-bfdf-b2d4ef5c5d0b.png",alt:""})]}),"\n",(0,l.jsxs)(s.li,{children:["\u66f4\u65b0\u4e3a 8 \u6838\u673a\u5668\u7c7b\u578b\uff08\u6700\u5c0f\u914d\u7f6e\u53ef\u80fd\u592a\u5c0f\uff0c\u65e0\u6cd5\u6b63\u5e38\u8fd0\u884c PostHog\uff09\u3002\n",(0,l.jsx)(s.img,{src:"https://user-images.githubusercontent.com/890921/231490278-140f814e-e77b-46d5-9a4f-31c1b1d6956a.png",alt:""})]}),"\n",(0,l.jsx)(s.li,{children:'\u6253\u5f00 codespace\uff0c\u4f7f\u7528\u5217\u8868\u4e2d\u7684"Open in"\u9009\u9879\u4e4b\u4e00\u3002'}),"\n",(0,l.jsxs)(s.li,{children:["\u5728 codespace \u4e2d\uff0c\u6253\u5f00\u7ec8\u7aef\u7a97\u53e3\u5e76\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"docker compose -f docker-compose.dev.yml up"}),"\u3002"]}),"\n",(0,l.jsxs)(s.li,{children:["\u5728\u53e6\u4e00\u4e2a\u7ec8\u7aef\u4e2d\uff0c\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"pnpm i"}),"\uff08\u5e76\u5728\u540e\u7eed\u547d\u4ee4\u4e2d\u4f7f\u7528\u76f8\u540c\u7684\u7ec8\u7aef\uff09"]}),"\n",(0,l.jsxs)(s.li,{children:["\u7136\u540e\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"pip install -r requirements.txt -r requirements-dev.txt"})]}),"\n",(0,l.jsxs)(s.li,{children:["\u73b0\u5728\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"./bin/migrate"})," \u7136\u540e\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"./bin/start"}),"\u3002"]}),"\n",(0,l.jsxs)(s.li,{children:["\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 ",(0,l.jsx)(s.a,{href:"http://localhost:8010/%E3%80%82",children:"http://localhost:8010/\u3002"})]}),"\n",(0,l.jsxs)(s.li,{children:["\u8981\u5728\u4f60\u5168\u65b0\u7684 PostHog \u5b9e\u4f8b\u4e2d\u83b7\u53d6\u4e00\u4e9b\u5b9e\u7528\u7684\u6d4b\u8bd5\u6570\u636e\uff0c\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"DEBUG=1 ./manage.py generate_demo_data"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"\u9009\u9879\u4e8c\u672c\u5730\u5f00\u53d1",children:"\u9009\u9879\u4e8c\uff1a\u672c\u5730\u5f00\u53d1"}),"\n",(0,l.jsx)(s.h3,{id:"\u5148\u51b3\u6761\u4ef6",children:"\u5148\u51b3\u6761\u4ef6"}),"\n",(0,l.jsx)(s.h4,{id:"macos",children:"macOS"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u5b89\u88c5 Xcode Command Line Tools\uff0c\u8bf7\u5b89\u88c5\uff1a",(0,l.jsx)(s.code,{children:"xcode-select --install"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u6309\u7167",(0,l.jsx)(s.a,{href:"https://brew.sh/",children:"\u8fd9\u91cc\u7684\u8bf4\u660e"}),"\u5b89\u88c5\u5305\u7ba1\u7406\u5668 Homebrew\u3002"]}),"\n",(0,l.jsx)("blockquote",{class:"warning-note",children:(0,l.jsxs)(s.p,{children:["\u5b89\u88c5\u540e\uff0c\u8bf7\u52a1\u5fc5\u6309\u7167\u7ec8\u7aef\u4e2d\u6253\u5370\u7684\u8bf4\u660e\u5c06 Homebrew \u6dfb\u52a0\u5230\u4f60\u7684 ",(0,l.jsx)("code",{children:"$PATH"})," \u4e2d\u3002\u5426\u5219\u547d\u4ee4\u884c\u5c06\u65e0\u6cd5\u8bc6\u522b\u4f7f\u7528 ",(0,l.jsx)("code",{children:"brew"})," \u5b89\u88c5\u7684\u5305\u3002"]})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(s.code,{children:"brew install orbstack"})," \u5b89\u88c5 ",(0,l.jsx)(s.a,{href:"https://orbstack.dev/",children:"OrbStack"})," \u2013 \u4e00\u4e2a\u6027\u80fd\u66f4\u597d\u7684 Docker Desktop \u66ff\u4ee3\u54c1\u3002\u8fdb\u5165 OrbStack \u8bbe\u7f6e\uff0c\u5c06\u5185\u5b58\u4f7f\u7528\u9650\u5236\u8bbe\u7f6e\u4e3a",(0,l.jsx)(s.strong,{children:"\u81f3\u5c11 4 GB"}),"\uff08\u5982\u679c\u53ef\u4ee5\u7684\u8bdd\u8bbe\u7f6e\u4e3a 8 GB\uff09+ CPU \u4f7f\u7528\u9650\u5236\u8bbe\u7f6e\u4e3a\u81f3\u5c11 4 \u6838\uff08\u5373 400%\uff09\u3002\u5982\u679c\u4f60\u5728 PostHog \u5de5\u4f5c\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 Brex \u83b7\u53d6\u8bb8\u53ef\u8bc1\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u7ee7\u7eed",(0,l.jsx)(s.a,{href:"#%E5%85%8B%E9%9A%86%E4%BB%93%E5%BA%93",children:"\u514b\u9686\u4ed3\u5e93"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"ubuntu",children:"Ubuntu"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u6309\u7167",(0,l.jsx)(s.a,{href:"https://docs.docker.com/engine/install/ubuntu/",children:"\u8fd9\u91cc\u7684\u5b98\u65b9\u8bf4\u660e"}),"\u5b89\u88c5 Docker\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u5b89\u88c5 ",(0,l.jsx)(s.code,{children:"build-essential"})," \u5305\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo apt install -y build-essential\n"})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u7ee7\u7eed",(0,l.jsx)(s.a,{href:"#%E5%85%8B%E9%9A%86%E4%BB%93%E5%BA%93",children:"\u514b\u9686\u4ed3\u5e93"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"\u514b\u9686\u4ed3\u5e93",children:"\u514b\u9686\u4ed3\u5e93"}),"\n",(0,l.jsxs)(s.p,{children:["\u514b\u9686 ",(0,l.jsx)(s.a,{href:"https://github.com/posthog/posthog",children:"PostHog \u4ed3\u5e93"}),"\u3002\u6240\u6709\u540e\u7eed\u547d\u4ee4\u90fd\u5047\u8bbe\u4f60\u5728 ",(0,l.jsx)(s.code,{children:"posthog/"})," \u6587\u4ef6\u5939\u4e2d\u3002"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"git clone https://github.com/PostHog/posthog && cd posthog/\n"})}),"\n",(0,l.jsx)(s.h3,{id:"\u5373\u65f6\u8bbe\u7f6e",children:"\u5373\u65f6\u8bbe\u7f6e"}),"\n",(0,l.jsxs)(s.p,{children:["\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,l.jsx)(s.a,{href:"https://flox.dev/",children:"Flox"})," \u7acb\u5373\u8bbe\u7f6e\u4f60\u7684\u5f00\u53d1\u73af\u5883\u3002Flox \u662f\u4e00\u4e2a\u5f00\u53d1\u73af\u5883\u7ba1\u7406\u5668\uff0c\u5b83\u8d1f\u8d23\u7ba1\u7406\u5f00\u53d1 PostHog \u6240\u9700\u7684\u6574\u4e2a\u4f9d\u8d56\u5173\u7cfb\u56fe \u2013 \u6240\u6709\u8fd9\u4e9b\u90fd\u5728\u4ed3\u5e93\u7684 ",(0,l.jsx)(s.code,{children:".flox/manifest.toml"})," \u4e2d\u58f0\u660e\u3002\u8981\u542f\u52a8\u8fd9\u4e2a\u73af\u5883\uff1a"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u5b89\u88c5 Flox\uff08\u4ee5\u53ca\u7528\u4e8e\u9884\u63d0\u4ea4\u68c0\u67e5\u7684 ",(0,l.jsx)(s.code,{children:"ruff"})," \u548c ",(0,l.jsx)(s.code,{children:"rustup"}),"\uff0c\u8fd9\u4e9b\u5728 Flox \u73af\u5883\u4e4b\u5916\uff09\u3002"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"brew install flox ruff rustup && rustup-init && rustup default stable\n"})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u5728\u4ed3\u5e93\u6839\u76ee\u5f55\u4e0b\uff0c\u6fc0\u6d3b\u73af\u5883\u3002\uff08\u9996\u6b21\u6fc0\u6d3b\u65f6\uff0c\u7cfb\u7edf\u4f1a\u8be2\u95ee\u4f60\u662f\u5426\u5e0c\u671b\u4f7f\u7528 ",(0,l.jsx)(s.code,{children:"direnv"})," \u81ea\u52a8\u6fc0\u6d3b\u73af\u5883\u3002\uff09"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"flox activate\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u8fd9\u4f1a\u4e3a\u4f60\u63d0\u4f9b\u4e00\u4e2a\u529f\u80fd\u9f50\u5168\u7684\u73af\u5883\uff0c\u5176\u53ef\u6267\u884c\u6587\u4ef6\u548c\u94fe\u63a5\u5e93\u5b58\u50a8\u5728 ",(0,l.jsx)(s.code,{children:".flox/"})," \u4e0b\u3002\u4f60\u73b0\u5728\u5e94\u8be5\u80fd\u770b\u5230\u6709\u5173\u8fc1\u79fb\u548c\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684\u8bf4\u660e\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u5c31\u662f\u8fd9\u6837\uff01\u4f60\u73b0\u5728\u53ef\u4ee5\u6309\u7167\u4f60\u60f3\u8981\u7684\u65b9\u5f0f\u4fee\u6539 PostHog\u3002\u67e5\u770b",(0,l.jsx)(s.a,{href:"/handbook/engineering/project-structure",children:"\u9879\u76ee\u7ed3\u6784"}),"\u4e86\u89e3\u4ed3\u5e93\u5185\u5bb9\u7684\u4ecb\u7ecd\u3002\u8981\u63d0\u4ea4\u66f4\u6539\uff0c\u8bf7\u57fa\u4e8e ",(0,l.jsx)(s.code,{children:"master"})," \u521b\u5efa\u4e00\u4e2a\u65b0\u5206\u652f\u7528\u4e8e\u4f60\u7684\u9884\u671f\u66f4\u6539\uff0c\u7136\u540e\u5f00\u59cb\u5f00\u53d1\u3002"]}),"\n",(0,l.jsx)(s.h3,{id:"\u624b\u52a8\u8bbe\u7f6e",children:"\u624b\u52a8\u8bbe\u7f6e"}),"\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528",(0,l.jsx)(s.a,{href:"#%E5%8D%B3%E6%97%B6%E8%AE%BE%E7%BD%AE",children:"\u57fa\u4e8e Flox \u7684\u5373\u65f6\u8bbe\u7f6e"}),"\uff0c\u4f60\u4e5f\u53ef\u4ee5\u624b\u52a8\u8bbe\u7f6e\u73af\u5883\uff1a"]}),"\n",(0,l.jsx)(s.h4,{id:"1-\u542f\u52a8\u5916\u90e8\u670d\u52a1",children:"1. \u542f\u52a8\u5916\u90e8\u670d\u52a1"}),"\n",(0,l.jsx)(s.p,{children:"\u5728\u8fd9\u4e00\u6b65\u4e2d\uff0c\u6211\u4eec\u5c06\u542f\u52a8 PostHog \u5de5\u4f5c\u6240\u9700\u7684\u6240\u6709\u5916\u90e8\u670d\u52a1\u3002"}),"\n",(0,l.jsxs)(s.p,{children:["\u9996\u5148\uff0c\u5c06 ",(0,l.jsx)(s.code,{children:"127.0.0.1 kafka clickhouse"})," \u884c\u6dfb\u52a0\u5230 ",(0,l.jsx)(s.code,{children:"/etc/hosts"})," \u4e2d\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u4e9b\u6620\u5c04\u7684\u4e3b\u673a\uff0c\u6211\u4eec\u7684 ClickHouse \u548c Kafka \u6570\u636e\u670d\u52a1\u5c06\u65e0\u6cd5\u76f8\u4e92\u901a\u4fe1\u3002\n\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e00\u884c\u547d\u4ee4\u5b8c\u6210\u6b64\u64cd\u4f5c\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"echo '127.0.0.1 kafka clickhouse' | sudo tee -a /etc/hosts\n"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u8f83\u65b0\u7248\u672c\uff08>=4.1\uff09\u7684 Podman \u800c\u4e0d\u662f Docker\uff0c\u4e3b\u673a\u7684 ",(0,l.jsx)(s.code,{children:"/etc/hosts"})," \u9ed8\u8ba4\u7528\u4f5c\u5bb9\u5668\u7684\u57fa\u7840 hosts \u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u50cf Docker \u4e2d\u90a3\u6837\u4f7f\u7528\u5bb9\u5668\u7684 ",(0,l.jsx)(s.code,{children:"/etc/hosts"}),"\u3002\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4 ClickHouse \u5bb9\u5668\u4e2d\u7684\u4e3b\u673a\u540d\u89e3\u6790\u5931\u8d25\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728 ",(0,l.jsx)(s.a,{href:"https://github.com/containers/common/blob/main/docs/containers.conf.5.md#containers-table",children:(0,l.jsx)(s.code,{children:"containers.conf"})})," \u4e2d\u8bbe\u7f6e ",(0,l.jsx)(s.code,{children:'base_hosts_file="none"'})," \u6765\u89e3\u51b3\u3002"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u73b0\u5728\uff0c\u542f\u52a8 Docker Compose \u5806\u6808\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"docker compose -f docker-compose.dev.yml up\n"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u53cb\u60c5\u63d0\u793a 1\uff1a"})," \u5982\u679c\u4f60\u770b\u5230 ",(0,l.jsx)(s.code,{children:"Error while fetching server API version: 500 Server Error for http+docker://localhost/version:"}),"\uff0c\u5f88\u53ef\u80fd\u662f Docker Engine \u6ca1\u6709\u8fd0\u884c\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u53cb\u60c5\u63d0\u793a 2\uff1a"}),' \u5982\u679c\u4f60\u5728\u4efb\u4f55\u5730\u65b9\u770b\u5230"Exit Code 137"\uff0c\u8fd9\u610f\u5473\u7740\u5bb9\u5668\u5185\u5b58\u4e0d\u8db3\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u9700\u8981\u5728 OrbStack \u8bbe\u7f6e\u4e2d\u5206\u914d\u66f4\u591a\u7684 RAM\u3002']}),"\n"]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u53cb\u60c5\u63d0\u793a 3\uff1a"})," \u5728 Linux \u4e0a\uff0c\u4f60\u53ef\u80fd\u9700\u8981 ",(0,l.jsx)(s.code,{children:"sudo"})," \u2013 \u53c2\u89c1 ",(0,l.jsx)(s.a,{href:"https://docs.docker.com/engine/install/linux-postinstall",children:"Docker \u6587\u6863\u5173\u4e8e\u4ee5\u975e root \u7528\u6237\u7ba1\u7406 Docker"}),"\u3002\u6216\u8005\u8003\u8651\u4f7f\u7528 ",(0,l.jsx)(s.a,{href:"https://podman.io/getting-started/installation",children:"Podman"})," \u4f5c\u4e3a\u652f\u6301\u65e0\u6839\u5bb9\u5668\u7684\u66ff\u4ee3\u65b9\u6848\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u53cb\u60c5\u63d0\u793a 4\uff1a"})," \u5982\u679c\u4f60\u770b\u5230 ",(0,l.jsx)(s.code,{children:"Error: (HTTP code 500) server error - Ports are not available: exposing port TCP 0.0.0.0:5432 -> 0.0.0.0:0: listen tcp 0.0.0.0:5432: bind: address already in use"}),"\uff0c\u8bf4\u660e\u67d0\u5904\u5df2\u7ecf\u8fd0\u884c\u4e86 Postgres\u3002\u5148\u5c1d\u8bd5 ",(0,l.jsx)(s.code,{children:"docker compose -f docker-compose.dev.yml"}),"\uff0c\u6216\u8005\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"lsof -i :5432"})," \u67e5\u770b\u54ea\u4e2a\u8fdb\u7a0b\u6b63\u5728\u4f7f\u7528\u6b64\u7aef\u53e3\u3002"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo service postgresql stop\n"})}),"\n",(0,l.jsxs)(s.p,{children:["\u5176\u6b21\uff0c\u901a\u8fc7 ",(0,l.jsx)(s.code,{children:"docker ps"})," \u548c ",(0,l.jsx)(s.code,{children:"docker logs"}),"\uff08\u6216\u901a\u8fc7 OrbStack \u4eea\u8868\u677f\uff09\u9a8c\u8bc1\u6240\u6709\u8fd9\u4e9b\u670d\u52a1\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3002\u5b83\u4eec\u7684\u65e5\u5fd7\u5e94\u8be5\u663e\u793a\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell",children:'# docker ps                                                                                     NAMES\nCONTAINER ID   IMAGE                                      COMMAND                  CREATED          STATUS                    PORTS                                                                                            NAMES\n5a38d4e55447   temporalio/ui:2.10.3                       "./start-ui-server.sh"   51 seconds ago   Up 44 seconds             0.0.0.0:8081->8080/tcp                                                                           posthog-temporal-ui-1\n89b969801426   temporalio/admin-tools:1.20.0              "tail -f /dev/null"      51 seconds ago   Up 44 seconds                                                                                                              posthog-temporal-admin-tools-1\n81fd1b6d7b1b   clickhouse/clickhouse-server:23.6.1.1524   "/entrypoint.sh"         51 seconds ago   Up 50 seconds             0.0.0.0:8123->8123/tcp, 0.0.0.0:9000->9000/tcp, 0.0.0.0:9009->9009/tcp, 0.0.0.0:9440->9440/tcp   posthog-clickhouse-1\nf876f8bff35f   bitnami/kafka:2.8.1-debian-10-r99          "/opt/bitnami/script\u2026"   51 seconds ago   Up 50 seconds             0.0.0.0:9092->9092/tcp                                                                           posthog-kafka-1\nd22559261575   temporalio/auto-setup:1.20.0               "/etc/temporal/entry\u2026"   51 seconds ago   Up 45 seconds             6933-6935/tcp, 6939/tcp, 7234-7235/tcp, 7239/tcp, 0.0.0.0:7233->7233/tcp                         posthog-temporal-1\n5313fc278a70   postgres:12-alpine                         "docker-entrypoint.s\u2026"   51 seconds ago   Up 50 seconds (healthy)   0.0.0.0:5432->5432/tcp                                                                           posthog-db-1\nc04358d8309f   zookeeper:3.7.0                            "/docker-entrypoint.\u2026"   51 seconds ago   Up 50 seconds             2181/tcp, 2888/tcp, 3888/tcp, 8080/tcp                                                           posthog-zookeeper-1\n09add699866e   maildev/maildev:2.0.5                      "bin/maildev"            51 seconds ago   Up 50 seconds (healthy)   0.0.0.0:1025->1025/tcp, 0.0.0.0:1080->1080/tcp                                                   posthog-maildev-1\n61a44c094753   elasticsearch:7.16.2                       "/bin/tini -- /usr/l\u2026"   51 seconds ago   Up 50 seconds             9200/tcp, 9300/tcp                                                                               posthog-elasticsearch-1\na478cadf6911   minio/minio:RELEASE.2022-06-25T15-50-16Z   "sh -c \'mkdir -p /da\u2026"   51 seconds ago   Up 50 seconds             9000/tcp, 0.0.0.0:19000-19001->19000-19001/tcp                                                   posthog-object_storage-1\n91f838afe40e   redis:6.2.7-alpine                         "docker-entrypoint.s\u2026"   51 seconds ago   Up 50 seconds             0.0.0.0:6379->6379/tcp                                                                           posthog-redis-1\n\n# docker logs posthog-db-1 -n 1\n2021-12-06 13:47:08.325 UTC [1] LOG:  database system is ready to accept connections\n\n# docker logs posthog-redis-1 -n 1\n1:M 06 Dec 2021 13:47:08.435 * Ready to accept connections\n\n# docker logs posthog-clickhouse-1 -n 1\nSaved preprocessed configuration to \'/var/lib/clickhouse/preprocessed_configs/users.xml\'.\n\n# ClickHouse writes logs to `/var/log/clickhouse-server/clickhouse-server.log` and error logs to `/var/log/clickhouse-server/clickhouse-server.err.log` instead of stdout/stsderr. It can be useful to `cat` these files if there are any issues:\n# docker exec posthog-clickhouse-1 cat /var/log/clickhouse-server/clickhouse-server.log\n# docker exec posthog-clickhouse-1 cat /var/log/clickhouse-server/clickhouse-server.err.log\n\n# docker logs posthog-kafka-1\n[2021-12-06 13:47:23,814] INFO [KafkaServer id=1001] started (kafka.server.KafkaServer)\n\n# docker logs posthog-zookeeper-1\n# Because ClickHouse and Kafka connect to Zookeeper, there will be a lot of noise here. That\'s good.\n'})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u53cb\u60c5\u63d0\u793a\uff1a"})," Kafka \u76ee\u524d\u662f\u552f\u4e00\u4f7f\u7528\u7684 x86 \u5bb9\u5668\uff0c\u5728 ARM \u4e0a\u8fd0\u884c\u65f6\u53ef\u80fd\u4f1a\u968f\u673a\u5d29\u6e83\u3002\u91cd\u542f\u5b83\uff0c\u5f53\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u65f6\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u6700\u540e\uff0c\u5728\u672c\u5730\u5b89\u88c5 Postgres\u3002\u5373\u4f7f\u4f60\u8ba1\u5212\u5728 Docker \u4e2d\u8fd0\u884c Postgres\uff0c\u6211\u4eec\u4e5f\u9700\u8981\u672c\u5730\u5b89\u88c5 Postgres\uff0811+ \u7248\u672c\uff09\u6765\u83b7\u53d6\u5176 CLI \u5de5\u5177\u548c\u5f00\u53d1\u5e93/\u5934\u6587\u4ef6\u3002\u8fd9\u4e9b\u662f ",(0,l.jsx)(s.code,{children:"pip"})," \u5b89\u88c5 ",(0,l.jsx)(s.code,{children:"psycopg2"})," \u6240\u5fc5\u9700\u7684\u3002"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\u5728 macOS \u4e0a\uff1a","\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"brew install postgresql\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u8fd9\u4f1a\u540c\u65f6\u5b89\u88c5 Postgres \u670d\u52a1\u5668\u548c\u5176\u5de5\u5177\u3002\u8fd0\u884c\u6b64\u547d\u4ee4\u540e\u4e0d\u8981\u542f\u52a8\u670d\u52a1\u5668\u3002"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\u5728\u57fa\u4e8e Debian \u7684 Linux \u4e0a\uff1a","\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo apt install -y postgresql-client postgresql-contrib libpq-dev\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u8fd9\u6709\u610f\u53ea\u5b89\u88c5 Postgres \u5ba2\u6237\u7aef\u548c\u9a71\u52a8\u7a0b\u5e8f\uff0c\u800c\u4e0d\u662f\u670d\u52a1\u5668\u3002\u5982\u679c\u4f60\u60f3\u5b89\u88c5\u670d\u52a1\u5668\uff0c\u6216\u8005\u5df2\u7ecf\u5b89\u88c5\u4e86\u670d\u52a1\u5668\uff0c\u4f60\u9700\u8981\u505c\u6b62\u5b83\uff0c\u56e0\u4e3a\u5b83\u4f7f\u7528\u7684 TCP \u7aef\u53e3\u4e0e Postgres Docker \u5bb9\u5668\u4f7f\u7528\u7684\u7aef\u53e3\u51b2\u7a81\u3002\u5728 Linux \u4e0a\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,l.jsx)(s.code,{children:"sudo systemctl disable postgresql.service"})," \u6765\u5b8c\u6210\u6b64\u64cd\u4f5c\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u5728 Linux \u4e0a\uff0c\u4f60\u901a\u5e38\u6709\u5355\u72ec\u7684\u5305\uff1a",(0,l.jsx)(s.code,{children:"postgres"})," \u7528\u4e8e\u5de5\u5177\uff0c",(0,l.jsx)(s.code,{children:"postgres-server"})," \u7528\u4e8e\u670d\u52a1\u5668\uff0c",(0,l.jsx)(s.code,{children:"libpostgres-dev"})," \u7528\u4e8e ",(0,l.jsx)(s.code,{children:"psycopg2"})," \u4f9d\u8d56\u9879\u3002\u67e5\u770b\u4f60\u7684\u53d1\u884c\u7248\u7684\u5305\u5217\u8868\u4ee5\u83b7\u53d6\u6700\u65b0\u7684\u5305\u5217\u8868\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u4f60\u7684\u5de5\u4f5c\u7ad9\u662f Apple Silicon Mac\uff0c\u7b2c\u4e00\u6b21\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"pip install"})," \u65f6\uff0c\u4f60\u5fc5\u987b\u8bbe\u7f6e\u81ea\u5b9a\u4e49 OpenSSL \u5934\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:'brew install openssl\nCFLAGS="-I /opt/homebrew/opt/openssl/include $(python3.11-config --includes)" LDFLAGS="-L /opt/homebrew/opt/openssl/lib" GRPC_PYTHON_BUILD_SYSTEM_OPENSSL=1 GRPC_PYTHON_BUILD_SYSTEM_ZLIB=1 uv pip install -r requirements.txt\n'})}),"\n",(0,l.jsxs)(s.p,{children:["\u8fd9\u4e9b\u5c06\u5728\u5b89\u88c5 ",(0,l.jsx)(s.code,{children:"grpcio"})," \u548c ",(0,l.jsx)(s.code,{children:"psycopg2"})," \u65f6\u4f7f\u7528\u3002\u5b8c\u6210\u6b64\u64cd\u4f5c\u4e00\u6b21\u540e\uff0c\u5047\u8bbe\u8fd9\u4e24\u4e2a\u5305\u6ca1\u6709\u4efb\u4f55\u66f4\u6539\uff0c\u4e0b\u6b21\u53ea\u9700\u8fd0\u884c\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"uv pip install -r requirements.txt -r requirements-dev.txt\n"})}),"\n",(0,l.jsx)(s.h4,{id:"5-\u51c6\u5907-django-\u670d\u52a1\u5668",children:"5. \u51c6\u5907 Django \u670d\u52a1\u5668"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u5b89\u88c5\u4e00\u4e9b SAML \u5de5\u4f5c\u6240\u9700\u7684\u4f9d\u8d56\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 macOS\uff0c\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\uff0c\u5426\u5219\u67e5\u770b\u5b98\u65b9 ",(0,l.jsx)(s.a,{href:"https://github.com/mehcode/python-xmlsec",children:"xmlsec \u4ed3\u5e93"}),"\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u5728 macOS \u4e0a\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"brew install libxml2 libxmlsec1 pkg-config\n"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u5b89\u88c5 ",(0,l.jsx)(s.code,{children:"xmlsec"})," \u4e0d\u6210\u529f\uff0c\u5c1d\u8bd5\u66f4\u65b0 macOS \u5230\u6700\u65b0\u7248\u672c\uff08Sonoma\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u5728\u57fa\u4e8e Debian \u7684 Linux \u4e0a\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo apt install -y libxml2 libxmlsec1-dev libffi-dev pkg-config\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u5b89\u88c5 Python 3.11\u3002"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:["\u5728 macOS \u4e0a\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 Homebrew\uff1a",(0,l.jsx)(s.code,{children:"brew install python@3.11"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u5728\u57fa\u4e8e Debian \u7684 Linux \u4e0a\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo add-apt-repository ppa:deadsnakes/ppa -y\nsudo apt update\nsudo apt install python3.11 python3.11-venv python3.11-dev -y\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u786e\u4fdd\u5728 ",(0,l.jsx)(s.code,{children:"venv"})," \u5916\u90e8\u65f6\u59cb\u7ec8\u4f7f\u7528 ",(0,l.jsx)(s.code,{children:"python3"})," \u800c\u4e0d\u662f ",(0,l.jsx)(s.code,{children:"python"}),"\uff0c\u56e0\u4e3a\u540e\u8005\u5728\u67d0\u4e9b\u7cfb\u7edf\u4e0a\u53ef\u80fd\u6307\u5411 Python 2.x\u3002\u5982\u679c\u5b89\u88c5\u591a\u4e2a\u7248\u672c\u7684 Python 3\uff0c\u4f8b\u5982\u4f7f\u7528 ",(0,l.jsx)(s.code,{children:"deadsnakes"})," PPA\uff0c\u4f7f\u7528 ",(0,l.jsx)(s.code,{children:"python3.11"})," \u800c\u4e0d\u662f ",(0,l.jsx)(s.code,{children:"python3"}),"\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,l.jsx)(s.a,{href:"https://github.com/pyenv/pyenv",children:"pyenv"}),"\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u7ba1\u7406\u591a\u4e2a Python 3 \u7248\u672c\u3002"]}),"\n",(0,l.jsxs)(s.ol,{start:"3",children:["\n",(0,l.jsxs)(s.li,{children:["\u5b89\u88c5 ",(0,l.jsx)(s.code,{children:"uv"})]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.code,{children:"uv"})," \u662f\u4e00\u4e2a\u975e\u5e38\u5feb\u901f\u7684\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u7528\u5b83\u6765\u7ba1\u7406 python \u865a\u62df\u73af\u5883\u548c\u4f9d\u8d56\u9879\u3002\u67e5\u770b ",(0,l.jsx)(s.a,{href:"https://docs.astral.sh/uv/",children:"https://docs.astral.sh/uv/"}),"\u3002\u5b89\u88c5\u540e\uff0c\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55 ",(0,l.jsx)(s.code,{children:"pip"})," \u547d\u4ee4\u524d\u52a0\u4e0a ",(0,l.jsx)(s.code,{children:"uv"})," \u6765\u83b7\u5f97\u901f\u5ea6\u63d0\u5347\u3002"]}),"\n",(0,l.jsxs)(s.ol,{start:"4",children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u521b\u5efa\u540d\u4e3a 'env' \u7684\u865a\u62df\u73af\u5883\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"uv venv env --python 3.11\n"})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u6fc0\u6d3b\u865a\u62df\u73af\u5883\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"# \u5bf9\u4e8e bash/zsh/\u7b49\nsource env/bin/activate\n\n# \u5bf9\u4e8e fish\nsource env/bin/activate.fish\n"})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u5c06 pip \u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"uv pip install -U pip\n"})}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u4f7f\u7528 pip \u5b89\u88c5\u4f9d\u8d56\u9879"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"6-\u51c6\u5907\u6570\u636e\u5e93",children:"6. \u51c6\u5907\u6570\u636e\u5e93"}),"\n",(0,l.jsx)(s.p,{children:"\u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\u540e\u7aef\uff0c\u5e76\u4e14 Postgres \u548c ClickHouse \u6b63\u5728\u8fd0\u884c \u2013 \u4f46\u662f\u8fd9\u4e9b\u6570\u636e\u5e93\u76ee\u524d\u662f\u7a7a\u767d\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u8fd0\u884c_\u8fc1\u79fb_\u6765\u521b\u5efa\u6240\u6709\u8868\u7b49\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"cargo install sqlx-cli # \u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u5b89\u88c5\nDEBUG=1 ./bin/migrate\n"})}),"\n",(0,l.jsx)(s.h4,{id:"7-\u542f\u52a8-posthog",children:"7. \u542f\u52a8 PostHog"}),"\n",(0,l.jsx)(s.p,{children:"\u73b0\u5728\u540c\u65f6\u542f\u52a8 PostHog \u7684\u6240\u6709\u7ec4\u4ef6\uff08\u540e\u7aef\u3001worker\u3001\u63d2\u4ef6\u670d\u52a1\u5668\u548c\u524d\u7aef\uff09\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"./bin/start\n"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u6ce8\u610f\uff1a"})," \u6b64\u547d\u4ee4\u4f7f\u7528 ",(0,l.jsx)(s.a,{href:"https://github.com/pvolok/mprocs",children:"mprocs"})," \u5728\u5355\u4e2a\u7ec8\u7aef\u7a97\u53e3\u4e2d\u8fd0\u884c\u6240\u6709\u5f00\u53d1\u8fdb\u7a0b\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u6253\u5f00 ",(0,l.jsx)(s.a,{href:"http://localhost:8010",children:"http://localhost:8010"})," \u67e5\u770b\u5e94\u7528\u7a0b\u5e8f\u3002"]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u6ce8\u610f\uff1a"}),' \u7b2c\u4e00\u6b21\u8fd0\u884c\u6b64\u547d\u4ee4\u65f6\uff0c\u4f60\u53ef\u80fd\u4f1a\u6536\u5230\u4e00\u4e2a\u9519\u8bef\uff0c\u8bf4"layout.html is not defined"\u3002\u8bf7\u786e\u4fdd\u7b49\u5f85\u524d\u7aef\u7f16\u8bd1\u5b8c\u6210\u540e\u518d\u8bd5\u4e00\u6b21\u3002']}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u8981\u5728\u4f60\u5168\u65b0\u7684 PostHog \u5b9e\u4f8b\u4e2d\u83b7\u53d6\u4e00\u4e9b\u5b9e\u7528\u7684\u6d4b\u8bd5\u6570\u636e\uff0c\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"DEBUG=1 ./manage.py generate_demo_data"}),"\u3002\u8981\u67e5\u770b\u547d\u4ee4\u7684\u6709\u7528\u53c2\u6570\u5217\u8868\uff0c\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"DEBUG=1 ./manage.py generate_demo_data --help"}),"\u3002"]}),"\n",(0,l.jsx)(s.h4,{id:"8-\u5f00\u53d1",children:"8. \u5f00\u53d1"}),"\n",(0,l.jsxs)(s.p,{children:["\u5c31\u662f\u8fd9\u6837\uff01\u4f60\u73b0\u5728\u53ef\u4ee5\u6309\u7167\u4f60\u60f3\u8981\u7684\u65b9\u5f0f\u4fee\u6539 PostHog\u3002\u67e5\u770b",(0,l.jsx)(s.a,{href:"/handbook/engineering/project-structure",children:"\u9879\u76ee\u7ed3\u6784"}),"\u4e86\u89e3\u4ed3\u5e93\u5185\u5bb9\u7684\u4ecb\u7ecd\u3002\u8981\u63d0\u4ea4\u66f4\u6539\uff0c\u8bf7\u57fa\u4e8e ",(0,l.jsx)(s.code,{children:"master"})," \u521b\u5efa\u4e00\u4e2a\u65b0\u5206\u652f\u7528\u4e8e\u4f60\u7684\u9884\u671f\u66f4\u6539\uff0c\u7136\u540e\u5f00\u59cb\u5f00\u53d1\u3002"]}),"\n",(0,l.jsx)(s.h2,{id:"\u6d4b\u8bd5",children:"\u6d4b\u8bd5"}),"\n",(0,l.jsx)(s.p,{children:"\u8981\u5408\u5e76 PostHog PR\uff0c\u6240\u6709\u6d4b\u8bd5\u90fd\u5fc5\u987b\u901a\u8fc7\uff0c\u7406\u60f3\u60c5\u51b5\u4e0b\u4f60\u8fd8\u5e94\u8be5\u5f15\u5165\u65b0\u7684\u6d4b\u8bd5 - \u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u4f60\u5fc5\u987b\u80fd\u591f\u8f7b\u677e\u8fd0\u884c\u6d4b\u8bd5\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"\u524d\u7aef",children:"\u524d\u7aef"}),"\n",(0,l.jsx)(s.p,{children:"\u5bf9\u4e8e\u524d\u7aef\u5355\u5143\u6d4b\u8bd5\uff0c\u8fd0\u884c\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"pnpm test:unit\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u4f60\u53ef\u4ee5\u5c06\u8fd0\u884c\u8303\u56f4\u7f29\u5c0f\u5230\u4ec5\u5339\u914d\u8def\u5f84\u4e0b\u7684\u6587\u4ef6\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"pnpm jest --testPathPattern=frontend/src/lib/components/IntervalFilter/intervalFilterLogic.test.ts\n"})}),"\n",(0,l.jsxs)(s.p,{children:["\u8981\u66f4\u65b0\u6240\u6709\u89c6\u89c9\u56de\u5f52\u6d4b\u8bd5\u5feb\u7167\uff0c\u8bf7\u786e\u4fdd Storybook \u5728\u4f60\u7684\u673a\u5668\u4e0a\u8fd0\u884c\uff08\u4f60\u53ef\u4ee5\u5728\u5355\u72ec\u7684\u7ec8\u7aef\u6807\u7b7e\u4e2d\u4f7f\u7528 ",(0,l.jsx)(s.code,{children:"pnpm storybook"})," \u542f\u52a8\u5b83\uff09\u3002\u4f60\u53ef\u80fd\u8fd8\u9700\u8981\u4f7f\u7528 ",(0,l.jsx)(s.code,{children:"pnpm exec playwright install"})," \u5b89\u88c5 Playwright\u3002\u7136\u540e\u8fd0\u884c\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"pnpm test:visual\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u8981\u4ec5\u66f4\u65b0\u7279\u5b9a\u8def\u5f84\u4e0b\u7684\u6545\u4e8b\u7684\u5feb\u7167\uff0c\u8fd0\u884c\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"pnpm test:visual:update frontend/src/lib/Example.stories.tsx\n"})}),"\n",(0,l.jsx)(s.h3,{id:"\u540e\u7aef",children:"\u540e\u7aef"}),"\n",(0,l.jsx)(s.p,{children:"\u5bf9\u4e8e\u540e\u7aef\u6d4b\u8bd5\uff0c\u8fd0\u884c\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"pytest\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u4f60\u53ef\u4ee5\u5c06\u8fd0\u884c\u8303\u56f4\u7f29\u5c0f\u5230\u4ec5\u5339\u914d\u8def\u5f84\u4e0b\u7684\u6587\u4ef6\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"pytest posthog/test/test_example.py\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u6216\u8005\u4ec5\u6d4b\u8bd5\u5339\u914d\u51fd\u6570\u540d\u7684\u6d4b\u8bd5\u7528\u4f8b\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"pytest posthog/test/test_example.py -k test_something\n"})}),"\n",(0,l.jsxs)(s.p,{children:["\u8981\u67e5\u770b\u8c03\u8bd5\u65e5\u5fd7\uff08\u5982 ClickHouse \u67e5\u8be2\uff09\uff0c\u6dfb\u52a0\u53c2\u6570 ",(0,l.jsx)(s.code,{children:"--log-cli-level=DEBUG"}),"\u3002"]}),"\n",(0,l.jsx)(s.h3,{id:"\u7aef\u5230\u7aef",children:"\u7aef\u5230\u7aef"}),"\n",(0,l.jsxs)(s.p,{children:["\u5bf9\u4e8e Cypress \u7aef\u5230\u7aef\u6d4b\u8bd5\uff0c\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"bin/e2e-test-runner"}),"\u3002\u8fd9\u5c06\u542f\u52a8\u4e00\u4e2a PostHog \u7684\u6d4b\u8bd5\u5b9e\u4f8b\u5e76\u663e\u793a Cypress \u754c\u9762\uff0c\u4f60\u53ef\u4ee5\u4ece\u4e2d\u624b\u52a8\u9009\u62e9\u8981\u8fd0\u884c\u7684\u6d4b\u8bd5\u3002\u4f60\u9700\u8981\u5b89\u88c5 ",(0,l.jsx)(s.code,{children:"uv"}),"\uff08Python \u5305\u7ba1\u7406\u5668\uff09\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 ",(0,l.jsx)(s.code,{children:"brew install uv"})," \u6765\u5b89\u88c5\u3002\u5b8c\u6210\u540e\uff0c\u4f7f\u7528 Cmd + C \u7ec8\u6b62\u547d\u4ee4\u3002"]}),"\n",(0,l.jsx)(s.h2,{id:"\u989d\u5916\u4f7f\u7528\u7279\u6027\u6807\u5fd7",children:"\u989d\u5916\uff1a\u4f7f\u7528\u7279\u6027\u6807\u5fd7"}),"\n",(0,l.jsxs)(s.p,{children:["\u5f53\u4f7f\u7528\u73af\u5883\u53d8\u91cf ",(0,l.jsx)(s.code,{children:"DEBUG=1"}),"\uff08\u542f\u7528\u540d\u4e3a ",(0,l.jsx)(s.code,{children:"SELF_CAPTURE"})," \u7684\u8bbe\u7f6e\uff09\u5728\u672c\u5730\u5f00\u53d1\u65f6\uff0c\n\u4f60\u7684\u672c\u5730 PostHog \u5b9e\u4f8b\u4e2d\u7684\u6240\u6709\u5206\u6790\u90fd\u57fa\u4e8e\u8be5\u5b9e\u4f8b\u672c\u8eab - \u66f4\u5177\u4f53\u5730\u8bf4\uff0c\u662f\u57fa\u4e8e\u5f53\u524d\u9009\u62e9\u7684\u9879\u76ee\u3002\n\u8fd9\u610f\u5473\u7740\u4f60\u7684\u6d3b\u52a8\u4f1a\u7acb\u5373\u53cd\u6620\u5728\u5f53\u524d\u9879\u76ee\u4e2d\uff0c\u8fd9\u5bf9\u4e8e\u6d4b\u8bd5\u529f\u80fd\u53ef\u80fd\u5f88\u6709\u7528"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u4f8b\u5982\uff0c\u5f53\u524d\u5f00\u53d1\u5b9e\u4f8b\u542f\u7528\u54ea\u4e9b\u7279\u6027\u6807\u5fd7\u662f\u7531\u4f60\u540c\u65f6\u6253\u5f00\u7684\u9879\u76ee\u51b3\u5b9a\u7684\u3002"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["\u56e0\u6b64\uff0c\u5f53\u4f7f\u7528\u57fa\u4e8e\u7279\u6027\u6807\u5fd7 ",(0,l.jsx)(s.code,{children:"foo-bar"})," \u7684\u529f\u80fd\u65f6\uff0c",(0,l.jsx)(s.a,{href:"http://localhost:8010/feature_flags/new",children:"\u5728\u4f60\u7684\u672c\u5730\u5b9e\u4f8b\u4e2d\u6dfb\u52a0\u5177\u6709\u6b64\u952e\u7684\u7279\u6027\u6807\u5fd7"}),"\u5e76\u5728\u90a3\u91cc\u53d1\u5e03\u5b83\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u4f60\u60f3\u7acb\u5373\u62e5\u6709 PostHog \u4e2d\u5b58\u5728\u7684\u6240\u6709\u7279\u6027\u6807\u5fd7\uff0c\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"DEBUG=1 python3 manage.py sync_feature_flags"})," - \u5b83\u4eec\u5c06\u88ab\u6dfb\u52a0\u5230\u5b9e\u4f8b\u4e2d\u7684\u6bcf\u4e2a\u9879\u76ee\u4e2d\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5b8c\u5168\u5c55\u5f00\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u6b64\u547d\u4ee4\u4f1a\u81ea\u52a8\u5c06\u4efb\u4f55\u4ee5 ",(0,l.jsx)(s.code,{children:"_EXPERIMENT"})," \u7ed3\u5c3e\u7684\u7279\u6027\u6807\u5fd7\u8bbe\u7f6e\u4e3a\u5177\u6709 ",(0,l.jsx)(s.code,{children:"control"})," \u548c ",(0,l.jsx)(s.code,{children:"test"})," \u53d8\u4f53\u7684\u591a\u53d8\u91cf\u6807\u5fd7\u3002"]}),"\n",(0,l.jsxs)(s.p,{children:["\u540e\u7aef\u4fa7\u7684\u6807\u5fd7\u4ec5\u5728\u672c\u5730\u8bc4\u4f30\uff0c\u8fd9\u9700\u8981\u8bbe\u7f6e ",(0,l.jsx)(s.code,{children:"POSTHOG_PERSONAL_API_KEY"})," \u73af\u5883\u53d8\u91cf\u3002\u5728",(0,l.jsx)(s.a,{href:"http://localhost:8010/settings/user#personal-api-keys",children:"\u4f60\u7684\u7528\u6237\u8bbe\u7f6e"}),"\u4e2d\u751f\u6210\u5bc6\u94a5\u3002"]}),"\n",(0,l.jsx)(s.h2,{id:"\u989d\u5916\u4f7f\u7528-vs-code-\u8c03\u8bd5",children:"\u989d\u5916\uff1a\u4f7f\u7528 VS Code \u8c03\u8bd5"}),"\n",(0,l.jsxs)(s.p,{children:["PostHog \u4ed3\u5e93\u5305\u542b\u4e86 ",(0,l.jsx)(s.a,{href:"https://github.com/PostHog/posthog/blob/master/.vscode/launch.json",children:"VS Code \u8c03\u8bd5\u9009\u9879"}),"\u3002\u53ea\u9700\u8f6c\u5230 VS Code \u4e2d\u7684 ",(0,l.jsx)(s.code,{children:"\u8fd0\u884c\u548c\u8c03\u8bd5"})," \u6807\u7b7e\uff0c\u9009\u62e9\u4f60\u60f3\u8981\u8c03\u8bd5\u7684\u6240\u9700\u670d\u52a1\uff0c\u7136\u540e\u8fd0\u884c\u5b83\u3002\u4e00\u65e6\u5b83\u542f\u52a8\uff0c\u4f60\u5c31\u53ef\u4ee5\u8bbe\u7f6e\u65ad\u70b9\u5e76\u9010\u6b65\u6267\u884c\u4ee3\u7801\uff0c\u4ee5\u51c6\u786e\u4e86\u89e3\u53d1\u751f\u4e86\u4ec0\u4e48\u3002\u5982\u679c\u4f60\u9047\u5230\u68d8\u624b\u7684\u6d4b\u8bd5\u5931\u8d25\uff0c\u8fd8\u6709\u7528\u4e8e\u524d\u7aef\u548c\u540e\u7aef\u6d4b\u8bd5\u7684\u8c03\u8bd5\u542f\u52a8\u9009\u9879\u3002"]}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"\u6ce8\u610f\uff1a"}),' \u4f60\u53ef\u4ee5\u4f7f\u7528\u4e3b\u8981\u7684"PostHog"\u542f\u52a8\u9009\u9879\u8c03\u8bd5\u6240\u6709\u670d\u52a1\u3002\u5426\u5219\uff0c\u5982\u679c\u4f60\u4f7f\u7528 ',(0,l.jsx)(s.code,{children:"./bin/start"})," \u5728\u672c\u5730\u8fd0\u884c\u5927\u591a\u6570 PostHog \u670d\u52a1\uff0c\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u53ea\u60f3\u8c03\u8bd5\u540e\u7aef\uff0c\u8bf7\u786e\u4fdd\u6682\u65f6\u4ece",(0,l.jsx)(s.a,{href:"https://github.com/PostHog/posthog/blob/master/bin/start#L22",children:"\u542f\u52a8\u811a\u672c"}),"\u4e2d\u6ce8\u91ca\u6389\u8be5\u670d\u52a1\u3002"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"extra-debugging-the-backend-in-pycharm",children:"Extra: Debugging the backend in PyCharm"}),"\n",(0,l.jsx)(s.p,{children:"\u501f\u52a9 PyCharm \u5185\u7f6e\u7684 Django \u652f\u6301\uff0c\u5728\u540e\u7aef\u8bbe\u7f6e\u8c03\u8bd5\u76f8\u5f53\u5bb9\u6613\u3002\u5f53\u4f60\u60f3\u8981\u8ddf\u8e2a\u548c\u8c03\u8bd5\u4ece\u5ba2\u6237\u7aef\u53d1\u51fa\u7684\u7f51\u7edc\u8bf7\u6c42\u4e00\u76f4\u5230\u670d\u52a1\u5668\u65f6\uff0c\u8fd9\u7279\u522b\u6709\u7528\u3002\u4f60\u53ef\u4ee5\u8bbe\u7f6e\u65ad\u70b9\u5e76\u9010\u6b65\u6267\u884c\u4ee3\u7801\uff0c\u4ee5\u51c6\u786e\u4e86\u89e3\u540e\u7aef\u5982\u4f55\u5904\u7406\u4f60\u7684\u8bf7\u6c42\u3002"}),"\n",(0,l.jsx)(s.h3,{id:"\u8bbe\u7f6e-pycharm",children:"\u8bbe\u7f6e PyCharm"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"\u6253\u5f00\u4ed3\u5e93\u6587\u4ef6\u5939\u3002"}),"\n",(0,l.jsxs)(s.li,{children:['\u8bbe\u7f6e python \u89e3\u91ca\u5668\uff08\u8bbe\u7f6e... > \u9879\u76ee\uff1aposthog > Python \u89e3\u91ca\u5668 > \u6dfb\u52a0\u89e3\u91ca\u5668\uff09\uff1a\u9009\u62e9"\u73b0\u6709"\u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a ',(0,l.jsx)(s.code,{children:"path_to_repo/posthog/env/bin/python"}),"\u3002"]}),"\n",(0,l.jsxs)(s.li,{children:["\u8bbe\u7f6e Django \u652f\u6301\uff08\u8bbe\u7f6e... > \u8bed\u8a00\u548c\u6846\u67b6 > Django\uff09\uff1a","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Django \u9879\u76ee\u6839\u76ee\u5f55\uff1a",(0,l.jsx)(s.code,{children:"path_to_repo"})]}),"\n",(0,l.jsxs)(s.li,{children:["\u8bbe\u7f6e\uff1a",(0,l.jsx)(s.code,{children:"posthog/settings/__init__py"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"\u542f\u52a8\u8c03\u8bd5\u73af\u5883",children:"\u542f\u52a8\u8c03\u8bd5\u73af\u5883"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\u4e0d\u8981\u624b\u52a8\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"docker compose"}),"\uff0c\u4f60\u53ef\u4ee5\u6253\u5f00 ",(0,l.jsx)(s.code,{children:"docker-compose.dev.yml"})," \u6587\u4ef6\u5e76\u70b9\u51fb ",(0,l.jsx)(s.code,{children:"services"})," \u65c1\u8fb9\u7684\u53cc\u64ad\u653e\u56fe\u6807"]}),"\n",(0,l.jsxs)(s.li,{children:["\u4ece\u8fd0\u884c\u914d\u7f6e\u4e2d\u9009\u62e9\uff1a","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:'"PostHog" \u5e76\u70b9\u51fb\u8c03\u8bd5'}),"\n",(0,l.jsx)(s.li,{children:'"Celery" \u5e76\u70b9\u51fb\u8c03\u8bd5\uff08\u53ef\u9009\uff09'}),"\n",(0,l.jsx)(s.li,{children:'"Frontend" \u5e76\u70b9\u51fb\u8fd0\u884c'}),"\n",(0,l.jsx)(s.li,{children:'"Plugin server" \u5e76\u70b9\u51fb\u8fd0\u884c'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"extra-accessing-postgres",children:"Extra: Accessing Postgres"}),"\n",(0,l.jsxs)(s.p,{children:["\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u8fde\u63a5\u5230\u6570\u636e\u5e93\u6765\u67e5\u8be2\u672c\u5730\u6570\u636e\u5e93\u3001\u8fdb\u884c\u66f4\u6539\u7b49\u3002\u8981\u8fde\u63a5\u5230\u6570\u636e\u5e93\uff0c\u8bf7\u4f7f\u7528\u50cf pgAdmin \u8fd9\u6837\u7684\u5de5\u5177\u5e76\u8f93\u5165\u4ee5\u4e0b\u8fde\u63a5\u8be6\u7ec6\u4fe1\u606f\uff1a",(0,l.jsx)(s.em,{children:"host"}),":",(0,l.jsx)(s.code,{children:"localhost"})," ",(0,l.jsx)(s.em,{children:"port"}),":",(0,l.jsx)(s.code,{children:"5432"})," ",(0,l.jsx)(s.em,{children:"database"}),":",(0,l.jsx)(s.code,{children:"posthog"}),", ",(0,l.jsx)(s.em,{children:"username"}),":",(0,l.jsx)(s.code,{children:"posthog"}),", ",(0,l.jsx)(s.em,{children:"pwd"}),":",(0,l.jsx)(s.code,{children:"posthog"}),"\u3002"]}),"\n",(0,l.jsx)(s.h2,{id:"extra-accessing-the-django-admin",children:"Extra: Accessing the Django Admin"}),"\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u4f60\u65e0\u6cd5\u8bbf\u95ee Django admin ",(0,l.jsx)(s.a,{href:"http://localhost:8000/admin/%EF%BC%8C%E5%8F%AF%E8%83%BD%E6%98%AF%E5%9B%A0%E4%B8%BA%E4%BD%A0%E7%9A%84%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7%E6%9C%AA%E8%AE%BE%E7%BD%AE%E4%B8%BA%E5%B7%A5%E4%BD%9C%E4%BA%BA%E5%91%98%E7%94%A8%E6%88%B7%E3%80%82%E4%BD%A0%E5%8F%AF%E4%BB%A5%E8%BF%9E%E6%8E%A5%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E6%89%BE%E5%88%B0%E4%BD%A0%E7%9A%84",children:"http://localhost:8000/admin/\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u4f60\u7684\u672c\u5730\u7528\u6237\u672a\u8bbe\u7f6e\u4e3a\u5de5\u4f5c\u4eba\u5458\u7528\u6237\u3002\u4f60\u53ef\u4ee5\u8fde\u63a5\u5230\u6570\u636e\u5e93\uff0c\u627e\u5230\u4f60\u7684"})," ",(0,l.jsx)(s.code,{children:"posthog_user"})," \u5e76\u5c06 ",(0,l.jsx)(s.code,{children:"is_staff"})," \u8bbe\u7f6e\u4e3a ",(0,l.jsx)(s.code,{children:"true"}),"\u3002\u8fd9\u5e94\u8be5\u4f7f\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u8bbf\u95ee\u3002"]}),"\n",(0,l.jsx)(s.h2,{id:"\u989d\u5916\u5f00\u53d1\u4ed8\u8d39\u529f\u80fd\u4ec5\u9650-posthog-\u5458\u5de5",children:"\u989d\u5916\uff1a\u5f00\u53d1\u4ed8\u8d39\u529f\u80fd\uff08\u4ec5\u9650 PostHog \u5458\u5de5\uff09"}),"\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u4f60\u662f PostHog \u5458\u5de5\uff0c\u4f60\u53ef\u4ee5\u5728\u672c\u5730\u5b9e\u4f8b\u4e0a\u8bbf\u95ee\u4ed8\u8d39\u529f\u80fd\uff0c\u4ee5\u4f7f\u5f00\u53d1\u66f4\u5bb9\u6613\u3002",(0,l.jsx)(s.a,{href:"https://github.com/PostHog/billing?tab=readme-ov-file#licensing-your-local-instance",children:"\u5728\u6211\u4eec\u7684\u5185\u90e8\u6307\u5357\u4e2d\u4e86\u89e3\u5982\u4f55\u64cd\u4f5c"}),"\u3002"]}),"\n",(0,l.jsx)(s.h2,{id:"extra-working-with-the-data-warehouse-and-a-mysql-source",children:"Extra: Working with the data warehouse and a MySQL source"}),"\n",(0,l.jsx)(s.p,{children:"\u5982\u679c\u4f60\u60f3\u5c06\u672c\u5730 MySQL \u6570\u636e\u5e93\u8bbe\u7f6e\u4e3a\u6570\u636e\u4ed3\u5e93\u7684\u6e90\uff0c\u4f60\u9700\u8981\u5b8c\u6210\u4e00\u4e9b\u989d\u5916\u7684\u8bbe\u7f6e\u6b65\u9aa4\uff1a"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"\u8bbe\u7f6e\u8981\u8fde\u63a5\u7684\u672c\u5730 MySQL \u6570\u636e\u5e93\u3002"}),"\n",(0,l.jsx)(s.li,{children:"\u5728\u4f60\u7684\u673a\u5668\u4e0a\u5b89\u88c5 MS SQL \u9a71\u52a8\u7a0b\u5e8f\u3002"}),"\n",(0,l.jsx)(s.li,{children:"\u4e3a Temporal \u4efb\u52a1\u8fd0\u884c\u5668\u5b9a\u4e49\u989d\u5916\u7684\u73af\u5883\u53d8\u91cf\u3002"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u9996\u5148\uff0c\u5b89\u88c5 MySQL\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"brew install mysql\nbrew services start mysql\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u5b89\u88c5 MySQL \u540e\uff0c\u521b\u5efa\u6570\u636e\u5e93\u548c\u8868\uff0c\u63d2\u5165\u4e00\u884c\u6570\u636e\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u8fde\u63a5\u7684\u7528\u6237\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"mysql -u root\n"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-sql",children:"CREATE DATABASE posthog_dw_test;\nCREATE TABLE IF NOT EXISTS payments (id INT AUTO_INCREMENT PRIMARY KEY, timestamp DATETIME, distinct_id VARCHAR(255), amount DECIMAL(10,2));\nINSERT INTO payments (timestamp, distinct_id, amount) VALUES (NOW(), 'testuser@example.com', 99.99);\nCREATE USER 'posthog'@'%' IDENTIFIED BY 'posthog';\nGRANT ALL PRIVILEGES ON posthog_dw_test.* TO 'posthog'@'%';\nFLUSH PRIVILEGES;\n"})}),"\n",(0,l.jsxs)(s.p,{children:["\u63a5\u4e0b\u6765\uff0c\u4f60\u9700\u8981\u5b89\u88c5\u4e00\u4e9b MS SQL \u9a71\u52a8\u7a0b\u5e8f\uff0c\u4ee5\u4fbf PostHog \u5e94\u7528\u7a0b\u5e8f\u8fde\u63a5\u5230 MySQL \u6570\u636e\u5e93\u3002\u5728 ",(0,l.jsx)(s.a,{href:"https://github.com/PostHog/posthog/blob/master/posthog/warehouse/README.md",children:"posthog/warehouse/README.md"})," \u4e2d\u4e86\u89e3\u5b8c\u6574\u8fc7\u7a0b\u3002\u5982\u679c\u6ca1\u6709\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5728\u5c06 SQL \u6570\u636e\u5e93\u8fde\u63a5\u5230\u6570\u636e\u4ed3\u5e93\u65f6\uff0c\u4f60\u4f1a\u6536\u5230\u4ee5\u4e0b\u9519\u8bef\uff1a"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"symbol not found in flat namespace '_bcp_batch'\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u6700\u540e\uff0c\u4f60\u9700\u8981\u5b9a\u4e49\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf\uff0c\u4ee5\u4fbf Temporal \u4efb\u52a1\u8fd0\u884c\u5668\u76d1\u89c6\u6b63\u786e\u7684\u961f\u5217\u5e76\u6309\u9884\u671f\u5de5\u4f5c\uff1a"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"# \u5728 #team-data-warehouse \u4e2d\u8be2\u95ee\u8fd9\u4e9b\u503c\nexport PYTHONUNBUFFERED=\nexport DJANGO_SETTINGS_MODULE=\nexport DEBUG=\nexport CLICKHOUSE_SECURE=\nexport KAFKA_HOSTS=\nexport DATABASE_URL=\nexport SKIP_SERVICE_VERSION_REQUIREMENTS=\nexport PRINT_SQL=\nexport BUCKET_URL=\nexport AIRBYTE_BUCKET_KEY=\nexport AIRBYTE_BUCKET_SECRET=\nexport AIRBYTE_BUCKET_REGION=\nexport AIRBYTE_BUCKET_DOMAIN=\nexport TEMPORAL_TASK_QUEUE=\nexport AWS_S3_ALLOW_UNSAFE_RENAME=\nexport HUBSPOT_APP_CLIENT_ID=\nexport HUBSPOT_APP_CLIENT_SECRET=\n"})}),"\n",(0,l.jsxs)(s.p,{children:["\u5982\u679c\u4f60\u5c06\u5b83\u4eec\u653e\u5728 ",(0,l.jsx)(s.code,{children:".temporal-worker-settings"})," \u6587\u4ef6\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5728\u8c03\u7528 ",(0,l.jsx)(s.code,{children:"DEBUG=1 ./bin/start"})," \u4e4b\u524d\u8fd0\u884c ",(0,l.jsx)(s.code,{children:"source .temporal-worker-settings"}),"\u3002"]}),"\n",(0,l.jsx)(s.p,{children:"\u8981\u9a8c\u8bc1\u4e00\u5207\u662f\u5426\u6309\u9884\u671f\u5de5\u4f5c\uff1a"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:'\u5728 PostHog \u5e94\u7528\u7a0b\u5e8f\u4e2d\u5bfc\u822a\u5230"\u6570\u636e\u7ba1\u9053"\u3002'}),"\n",(0,l.jsx)(s.li,{children:"\u4f7f\u7528\u4e0a\u8ff0\u8bbe\u7f6e\u521b\u5efa\u65b0\u7684 MySQL \u6e90\u3002"}),"\n",(0,l.jsx)(s.li,{children:'\u521b\u5efa\u6e90\u540e\uff0c\u70b9\u51fb"MySQL"\u9879\u3002\u5728\u67b6\u6784\u8868\u4e2d\uff0c\u70b9\u51fb\u4e09\u70b9\u83dc\u5355\u5e76\u9009\u62e9"\u91cd\u65b0\u52a0\u8f7d"\u9009\u9879\u3002'}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"\u4f5c\u4e1a\u8fd0\u884c\u540e\uff0c\u70b9\u51fb\u540c\u6b65\u7684\u8868\u540d\u5e94\u8be5\u4f1a\u5e26\u4f60\u5230\u4f60\u7684\u6570\u636e\u3002"})]})}function a(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>i});var c=n(96540);const l={},o=c.createContext(l);function r(e){const s=c.useContext(o);return c.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),c.createElement(o.Provider,{value:s},e.children)}}}]);