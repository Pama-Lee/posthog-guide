<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ğŸš€ éƒ¨ç½²/developing-locally" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">æœ¬åœ°å¼€å‘ | PostHog æŒ‡å—</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://pama-lee.github.io/posthog-guide/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://pama-lee.github.io/posthog-guide/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://pama-lee.github.io/posthog-guide/docs/ğŸš€ éƒ¨ç½²/developing-locally"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="æœ¬åœ°å¼€å‘ | PostHog æŒ‡å—"><meta data-rh="true" name="description" content="â—ï¸ æœ¬æŒ‡å—ä»…é€‚ç”¨äº PostHog æœ¬èº«çš„å¼€å‘ã€‚å¦‚æœä½ æƒ³éƒ¨ç½² PostHog ç”¨äºäº§å“åˆ†æéœ€æ±‚ï¼Œè¯·å‰å¾€è‡ªæ‰˜ç®¡ PostHogã€‚"><meta data-rh="true" property="og:description" content="â—ï¸ æœ¬æŒ‡å—ä»…é€‚ç”¨äº PostHog æœ¬èº«çš„å¼€å‘ã€‚å¦‚æœä½ æƒ³éƒ¨ç½² PostHog ç”¨äºäº§å“åˆ†æéœ€æ±‚ï¼Œè¯·å‰å¾€è‡ªæ‰˜ç®¡ PostHogã€‚"><link data-rh="true" rel="icon" href="/posthog-guide/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://pama-lee.github.io/posthog-guide/docs/ğŸš€ éƒ¨ç½²/developing-locally"><link data-rh="true" rel="alternate" href="https://pama-lee.github.io/posthog-guide/docs/ğŸš€ éƒ¨ç½²/developing-locally" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://pama-lee.github.io/posthog-guide/docs/ğŸš€ éƒ¨ç½²/developing-locally" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/posthog-guide/blog/rss.xml" title="PostHog æŒ‡å— RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posthog-guide/blog/atom.xml" title="PostHog æŒ‡å— Atom Feed"><link rel="stylesheet" href="/posthog-guide/assets/css/styles.93c2b873.css">
<script src="/posthog-guide/assets/js/runtime~main.46c73bd9.js" defer="defer"></script>
<script src="/posthog-guide/assets/js/main.8e68062b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/posthog-guide/img/logo.svg"><div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/posthog-guide/"><div class="navbar__logo"><img src="/posthog-guide/img/logo.svg" alt="PostHog åˆºçŒ¬" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/posthog-guide/img/logo.svg" alt="PostHog åˆºçŒ¬" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"></div><b class="navbar__title text--truncate">PostHog æŒ‡å—</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/posthog-guide/docs/intro">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/posthog-guide/blog">åšå®¢</a><a class="navbar__item navbar__link" href="/posthog-guide/plugin-market">æ’ä»¶å¸‚åœº</a><a class="navbar__item navbar__link" href="/posthog-guide/plugin-generator">æ’ä»¶ç”Ÿæˆå™¨</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/pama-lee/posthog-guide" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/posthog-guide/docs/intro">PostHog æŒ‡å—</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/posthog-guide/docs/category/-åŸºæœ¬æ¶æ„">ğŸ­ åŸºæœ¬æ¶æ„</a><button aria-label="å±•å¼€ä¾§è¾¹æ åˆ†ç±» &#x27;ğŸ­ åŸºæœ¬æ¶æ„&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/posthog-guide/docs/category/-éƒ¨ç½²">ğŸš€ éƒ¨ç½²</a><button aria-label="æŠ˜å ä¾§è¾¹æ åˆ†ç±» &#x27;ğŸš€ éƒ¨ç½²&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/posthog-guide/docs/ğŸš€ éƒ¨ç½²/cloud-cluster">Cloud é›†ç¾¤æ¶æ„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/posthog-guide/docs/ğŸš€ éƒ¨ç½²/developing-locally">æœ¬åœ°å¼€å‘</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/posthog-guide/docs/ğŸš€ éƒ¨ç½²/nomad">ä½¿ç”¨ Nomad éƒ¨ç½² PostHog</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/posthog-guide/docs/category/-æ•è·æœåŠ¡">ğŸ“¡ æ•è·æœåŠ¡</a><button aria-label="å±•å¼€ä¾§è¾¹æ åˆ†ç±» &#x27;ğŸ“¡ æ•è·æœåŠ¡&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/posthog-guide/docs/category/ï¸-è´Ÿè½½å‡è¡¡ä¸è½¬å‘">âš–ï¸ è´Ÿè½½å‡è¡¡ä¸è½¬å‘</a><button aria-label="å±•å¼€ä¾§è¾¹æ åˆ†ç±» &#x27;âš–ï¸ è´Ÿè½½å‡è¡¡ä¸è½¬å‘&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/posthog-guide/docs/category/-æŒä¹…åŒ–æ•°æ®åº“">ğŸ’¾ æŒä¹…åŒ–æ•°æ®åº“</a><button aria-label="å±•å¼€ä¾§è¾¹æ åˆ†ç±» &#x27;ğŸ’¾ æŒä¹…åŒ–æ•°æ®åº“&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/posthog-guide/docs/ğŸ” HogQL/aggregations">ğŸ” HogQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/posthog-guide/docs/ğŸ§© æ’ä»¶ä¸èµ„æº/data-flow-chart">ğŸ§© æ’ä»¶ä¸èµ„æº</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/posthog-guide/plugin-market">æ’ä»¶å¸‚åœº</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/posthog-guide/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/posthog-guide/docs/category/-éƒ¨ç½²"><span itemprop="name">ğŸš€ éƒ¨ç½²</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">æœ¬åœ°å¼€å‘</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>æœ¬åœ°å¼€å‘</h1></header><blockquote>
<p>â—ï¸ æœ¬æŒ‡å—ä»…é€‚ç”¨äº PostHog æœ¬èº«çš„å¼€å‘ã€‚å¦‚æœä½ æƒ³éƒ¨ç½² PostHog ç”¨äºäº§å“åˆ†æéœ€æ±‚ï¼Œè¯·å‰å¾€<a href="/posthog-guide/docs/self-host">è‡ªæ‰˜ç®¡ PostHog</a>ã€‚</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="posthog-å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„">PostHog å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ<a href="#posthog-å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„" class="hash-link" aria-label="PostHog å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿçš„ç›´æ¥é“¾æ¥" title="PostHog å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>åœ¨å¼€å§‹è®¾ç½®ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ PostHog çš„ç»„æˆéƒ¨åˆ†ã€‚</p>
<p>è¯¥åº”ç”¨ç”± 4 ä¸ªåŒæ—¶è¿è¡Œçš„ç»„ä»¶ç»„æˆï¼š</p>
<ul>
<li>Celery workerï¼ˆå¤„ç†åå°ä»»åŠ¡ï¼‰</li>
<li>Django æœåŠ¡å™¨</li>
<li>Node.js æ’ä»¶æœåŠ¡å™¨ï¼ˆå¤„ç†äº‹ä»¶æ¥æ”¶å’Œåº”ç”¨/æ’ä»¶ï¼‰</li>
<li>ä½¿ç”¨ Node.js æ„å»ºçš„ React å‰ç«¯</li>
</ul>
<p>è¿™äº›ç»„ä»¶ä¾èµ–äºä»¥ä¸‹å¤–éƒ¨æœåŠ¡ï¼š</p>
<ul>
<li>ClickHouse â€“ ç”¨äºå­˜å‚¨å¤§æ•°æ®ï¼ˆäº‹ä»¶ã€ç”¨æˆ·ã€åˆ†ææŸ¥è¯¢ï¼‰</li>
<li>Kafka â€“ ç”¨äºäº‹ä»¶æ¥æ”¶é˜Ÿåˆ—</li>
<li>MinIO â€“ ç”¨äºå­˜å‚¨æ–‡ä»¶ï¼ˆä¼šè¯å½•åˆ¶ã€æ–‡ä»¶å¯¼å‡ºï¼‰</li>
<li>PostgreSQL â€“ ç”¨äºå­˜å‚¨æ™®é€šæ•°æ®ï¼ˆç”¨æˆ·ã€é¡¹ç›®ã€ä¿å­˜çš„æ´å¯Ÿï¼‰</li>
<li>Redis â€“ ç”¨äºç¼“å­˜å’ŒæœåŠ¡é—´é€šä¿¡</li>
<li>Zookeeper â€“ ç”¨äºåè°ƒ Kafka å’Œ ClickHouse é›†ç¾¤</li>
</ul>
<p>åœ¨å¯åŠ¨ PostHog å¼€å‘å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬æ¨èä»¥ä¸‹é…ç½®ï¼š</p>
<ul>
<li>å¤–éƒ¨æœåŠ¡é€šè¿‡ <code>docker compose</code> åœ¨ Docker ä¸­è¿è¡Œ</li>
<li>PostHog æœ¬èº«åœ¨ä¸»æœºï¼ˆä½ çš„ç³»ç»Ÿï¼‰ä¸Šè¿è¡Œ</li>
</ul>
<p>è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ä¸‹é¢çš„æŒ‡å—ä¸­å°†è¦ä½¿ç”¨çš„é…ç½®ã€‚</p>
<blockquote>
<p>æŠ€æœ¯ä¸Šä¹Ÿå¯ä»¥å®Œå…¨åœ¨ Docker ä¸­è¿è¡Œ PostHogï¼Œä½†åŒæ­¥æ›´æ”¹ä¼šå˜å¾—æ›´æ…¢ï¼Œè€Œä¸”ä¸ºäº†å¼€å‘ï¼Œä½ ä»ç„¶éœ€è¦åœ¨ä¸»æœºä¸Šå®‰è£… PostHog ä¾èµ–é¡¹ï¼ˆå¦‚æ ¼å¼åŒ–æˆ–ç±»å‹æ£€æŸ¥å·¥å…·ï¼‰ã€‚
å¦ä¸€ç§æ–¹å¼ - å®Œå…¨åœ¨ä¸»æœºä¸Šè¿è¡Œæ‰€æœ‰å†…å®¹ï¼Œç”±äºä»å¤´å¼€å§‹å®ä¾‹åŒ– Kafka æˆ– ClickHouse æ¶‰åŠçš„å¤æ‚æ€§è¾ƒå¤§ï¼Œè¿™åœ¨å®è·µä¸­æ˜¯ä¸å¯è¡Œçš„ã€‚</p>
</blockquote>
<p>æœ¬æŒ‡å—å‡è®¾ä½ è¿è¡Œçš„æ˜¯ macOS æˆ–å½“å‰çš„ Ubuntu Linux LTSï¼ˆ24.04ï¼‰ã€‚</p>
<p>å¯¹äºå…¶ä»– Linux å‘è¡Œç‰ˆï¼Œè¯·æ ¹æ®éœ€è¦è°ƒæ•´æ­¥éª¤ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ <code>dnf</code> æˆ– <code>pacman</code> ä»£æ›¿ <code>apt</code>ï¼‰ã€‚</p>
<p>Windows æœ¬èº«ä¸æ”¯æŒã€‚ä½†æ˜¯ï¼ŒWindows ç”¨æˆ·å¯ä»¥è¿è¡Œ Linux è™šæ‹Ÿæœºã€‚æ¨èä½¿ç”¨æœ€æ–°çš„ Ubuntu LTS Desktopã€‚ï¼ˆä¸æ¨èä½¿ç”¨ Ubuntu Serverï¼Œå› ä¸ºè°ƒè¯•å‰ç«¯éœ€è¦èƒ½å¤Ÿè®¿é—® localhost çš„æµè§ˆå™¨ã€‚ï¼‰</p>
<p>å¦‚æœè¿™é‡Œçš„ä¸€äº›æ­¥éª¤å·²ç»è¿‡æ—¶ï¼Œè¯·å‘Šè¯‰æˆ‘ä»¬ - æ¬¢è¿<a href="https://github.com/PostHog/posthog.com/blob/master/contents/handbook/engineering/developing-locally.md" target="_blank" rel="noopener noreferrer">æäº¤è¡¥ä¸</a>ï¼</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é€‰é¡¹ä¸€ä½¿ç”¨-codespaces-å¼€å‘">é€‰é¡¹ä¸€ï¼šä½¿ç”¨ Codespaces å¼€å‘<a href="#é€‰é¡¹ä¸€ä½¿ç”¨-codespaces-å¼€å‘" class="hash-link" aria-label="é€‰é¡¹ä¸€ï¼šä½¿ç”¨ Codespaces å¼€å‘çš„ç›´æ¥é“¾æ¥" title="é€‰é¡¹ä¸€ï¼šä½¿ç”¨ Codespaces å¼€å‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>è¿™æ˜¯ä¸€ä¸ªæ›´å¿«é€Ÿçš„å…¥é—¨é€‰é¡¹ã€‚å¦‚æœä½ ä¸æƒ³æˆ–æ— æ³•ä½¿ç”¨ Codespacesï¼Œè¯·ç»§ç»­é˜…è¯»ä¸‹ä¸€èŠ‚ã€‚</p>
<ol>
<li>åˆ›å»ºä½ çš„ codespaceã€‚
<img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/890921/231489405-cb2010b4-d9e3-4837-bfdf-b2d4ef5c5d0b.png" alt="" class="img_ev3q"></li>
<li>æ›´æ–°ä¸º 8 æ ¸æœºå™¨ç±»å‹ï¼ˆæœ€å°é…ç½®å¯èƒ½å¤ªå°ï¼Œæ— æ³•æ­£å¸¸è¿è¡Œ PostHogï¼‰ã€‚
<img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/890921/231490278-140f814e-e77b-46d5-9a4f-31c1b1d6956a.png" alt="" class="img_ev3q"></li>
<li>æ‰“å¼€ codespaceï¼Œä½¿ç”¨åˆ—è¡¨ä¸­çš„&quot;Open in&quot;é€‰é¡¹ä¹‹ä¸€ã€‚</li>
<li>åœ¨ codespace ä¸­ï¼Œæ‰“å¼€ç»ˆç«¯çª—å£å¹¶è¿è¡Œ <code>docker compose -f docker-compose.dev.yml up</code>ã€‚</li>
<li>åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­ï¼Œè¿è¡Œ <code>pnpm i</code>ï¼ˆå¹¶åœ¨åç»­å‘½ä»¤ä¸­ä½¿ç”¨ç›¸åŒçš„ç»ˆç«¯ï¼‰</li>
<li>ç„¶åè¿è¡Œ <code>pip install -r requirements.txt -r requirements-dev.txt</code></li>
<li>ç°åœ¨è¿è¡Œ <code>./bin/migrate</code> ç„¶åè¿è¡Œ <code>./bin/start</code>ã€‚</li>
<li>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <a href="http://localhost:8010/%E3%80%82" target="_blank" rel="noopener noreferrer">http://localhost:8010/ã€‚</a></li>
<li>è¦åœ¨ä½ å…¨æ–°çš„ PostHog å®ä¾‹ä¸­è·å–ä¸€äº›å®ç”¨çš„æµ‹è¯•æ•°æ®ï¼Œè¿è¡Œ <code>DEBUG=1 ./manage.py generate_demo_data</code>ã€‚</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é€‰é¡¹äºŒæœ¬åœ°å¼€å‘">é€‰é¡¹äºŒï¼šæœ¬åœ°å¼€å‘<a href="#é€‰é¡¹äºŒæœ¬åœ°å¼€å‘" class="hash-link" aria-label="é€‰é¡¹äºŒï¼šæœ¬åœ°å¼€å‘çš„ç›´æ¥é“¾æ¥" title="é€‰é¡¹äºŒï¼šæœ¬åœ°å¼€å‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…ˆå†³æ¡ä»¶">å…ˆå†³æ¡ä»¶<a href="#å…ˆå†³æ¡ä»¶" class="hash-link" aria-label="å…ˆå†³æ¡ä»¶çš„ç›´æ¥é“¾æ¥" title="å…ˆå†³æ¡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="macos">macOS<a href="#macos" class="hash-link" aria-label="macOSçš„ç›´æ¥é“¾æ¥" title="macOSçš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<ol>
<li>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… Xcode Command Line Toolsï¼Œè¯·å®‰è£…ï¼š<code>xcode-select --install</code>ã€‚</p>
</li>
<li>
<p>æŒ‰ç…§<a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">è¿™é‡Œçš„è¯´æ˜</a>å®‰è£…åŒ…ç®¡ç†å™¨ Homebrewã€‚</p>
<blockquote class="warning-note"><p>å®‰è£…åï¼Œè¯·åŠ¡å¿…æŒ‰ç…§ç»ˆç«¯ä¸­æ‰“å°çš„è¯´æ˜å°† Homebrew æ·»åŠ åˆ°ä½ çš„ <code>$PATH</code> ä¸­ã€‚å¦åˆ™å‘½ä»¤è¡Œå°†æ— æ³•è¯†åˆ«ä½¿ç”¨ <code>brew</code> å®‰è£…çš„åŒ…ã€‚</p></blockquote>
</li>
<li>
<p>ä½¿ç”¨ <code>brew install orbstack</code> å®‰è£… <a href="https://orbstack.dev/" target="_blank" rel="noopener noreferrer">OrbStack</a> â€“ ä¸€ä¸ªæ€§èƒ½æ›´å¥½çš„ Docker Desktop æ›¿ä»£å“ã€‚è¿›å…¥ OrbStack è®¾ç½®ï¼Œå°†å†…å­˜ä½¿ç”¨é™åˆ¶è®¾ç½®ä¸º<strong>è‡³å°‘ 4 GB</strong>ï¼ˆå¦‚æœå¯ä»¥çš„è¯è®¾ç½®ä¸º 8 GBï¼‰+ CPU ä½¿ç”¨é™åˆ¶è®¾ç½®ä¸ºè‡³å°‘ 4 æ ¸ï¼ˆå³ 400%ï¼‰ã€‚å¦‚æœä½ åœ¨ PostHog å·¥ä½œï¼Œä½ å¯ä»¥ä½¿ç”¨ Brex è·å–è®¸å¯è¯ã€‚</p>
</li>
<li>
<p>ç»§ç»­<a href="#%E5%85%8B%E9%9A%86%E4%BB%93%E5%BA%93">å…‹éš†ä»“åº“</a>ã€‚</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ubuntu">Ubuntu<a href="#ubuntu" class="hash-link" aria-label="Ubuntuçš„ç›´æ¥é“¾æ¥" title="Ubuntuçš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<ol>
<li>
<p>æŒ‰ç…§<a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">è¿™é‡Œçš„å®˜æ–¹è¯´æ˜</a>å®‰è£… Dockerã€‚</p>
</li>
<li>
<p>å®‰è£… <code>build-essential</code> åŒ…ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> build-essential</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>ç»§ç»­<a href="#%E5%85%8B%E9%9A%86%E4%BB%93%E5%BA%93">å…‹éš†ä»“åº“</a>ã€‚</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="å…‹éš†ä»“åº“">å…‹éš†ä»“åº“<a href="#å…‹éš†ä»“åº“" class="hash-link" aria-label="å…‹éš†ä»“åº“çš„ç›´æ¥é“¾æ¥" title="å…‹éš†ä»“åº“çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p>å…‹éš† <a href="https://github.com/posthog/posthog" target="_blank" rel="noopener noreferrer">PostHog ä»“åº“</a>ã€‚æ‰€æœ‰åç»­å‘½ä»¤éƒ½å‡è®¾ä½ åœ¨ <code>posthog/</code> æ–‡ä»¶å¤¹ä¸­ã€‚</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/PostHog/posthog </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">cd</span><span class="token plain"> posthog/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å³æ—¶è®¾ç½®">å³æ—¶è®¾ç½®<a href="#å³æ—¶è®¾ç½®" class="hash-link" aria-label="å³æ—¶è®¾ç½®çš„ç›´æ¥é“¾æ¥" title="å³æ—¶è®¾ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ä½ å¯ä»¥ä½¿ç”¨ <a href="https://flox.dev/" target="_blank" rel="noopener noreferrer">Flox</a> ç«‹å³è®¾ç½®ä½ çš„å¼€å‘ç¯å¢ƒã€‚Flox æ˜¯ä¸€ä¸ªå¼€å‘ç¯å¢ƒç®¡ç†å™¨ï¼Œå®ƒè´Ÿè´£ç®¡ç†å¼€å‘ PostHog æ‰€éœ€çš„æ•´ä¸ªä¾èµ–å…³ç³»å›¾ â€“ æ‰€æœ‰è¿™äº›éƒ½åœ¨ä»“åº“çš„ <code>.flox/manifest.toml</code> ä¸­å£°æ˜ã€‚è¦å¯åŠ¨è¿™ä¸ªç¯å¢ƒï¼š</p>
<ol>
<li>
<p>å®‰è£… Floxï¼ˆä»¥åŠç”¨äºé¢„æäº¤æ£€æŸ¥çš„ <code>ruff</code> å’Œ <code>rustup</code>ï¼Œè¿™äº›åœ¨ Flox ç¯å¢ƒä¹‹å¤–ï¼‰ã€‚</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> flox ruff rustup </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> rustup-init </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> rustup default stable</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>åœ¨ä»“åº“æ ¹ç›®å½•ä¸‹ï¼Œæ¿€æ´»ç¯å¢ƒã€‚ï¼ˆé¦–æ¬¡æ¿€æ´»æ—¶ï¼Œç³»ç»Ÿä¼šè¯¢é—®ä½ æ˜¯å¦å¸Œæœ›ä½¿ç”¨ <code>direnv</code> è‡ªåŠ¨æ¿€æ´»ç¯å¢ƒã€‚ï¼‰</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flox activate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>è¿™ä¼šä¸ºä½ æä¾›ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„ç¯å¢ƒï¼Œå…¶å¯æ‰§è¡Œæ–‡ä»¶å’Œé“¾æ¥åº“å­˜å‚¨åœ¨ <code>.flox/</code> ä¸‹ã€‚ä½ ç°åœ¨åº”è¯¥èƒ½çœ‹åˆ°æœ‰å…³è¿ç§»å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„è¯´æ˜ã€‚</p>
<p>å°±æ˜¯è¿™æ ·ï¼ä½ ç°åœ¨å¯ä»¥æŒ‰ç…§ä½ æƒ³è¦çš„æ–¹å¼ä¿®æ”¹ PostHogã€‚æŸ¥çœ‹<a href="/posthog-guide/handbook/engineering/project-structure">é¡¹ç›®ç»“æ„</a>äº†è§£ä»“åº“å†…å®¹çš„ä»‹ç»ã€‚è¦æäº¤æ›´æ”¹ï¼Œè¯·åŸºäº <code>master</code> åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ç”¨äºä½ çš„é¢„æœŸæ›´æ”¹ï¼Œç„¶åå¼€å§‹å¼€å‘ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰‹åŠ¨è®¾ç½®">æ‰‹åŠ¨è®¾ç½®<a href="#æ‰‹åŠ¨è®¾ç½®" class="hash-link" aria-label="æ‰‹åŠ¨è®¾ç½®çš„ç›´æ¥é“¾æ¥" title="æ‰‹åŠ¨è®¾ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¦‚æœä½ ä¸æƒ³ä½¿ç”¨<a href="#%E5%8D%B3%E6%97%B6%E8%AE%BE%E7%BD%AE">åŸºäº Flox çš„å³æ—¶è®¾ç½®</a>ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒï¼š</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-å¯åŠ¨å¤–éƒ¨æœåŠ¡">1. å¯åŠ¨å¤–éƒ¨æœåŠ¡<a href="#1-å¯åŠ¨å¤–éƒ¨æœåŠ¡" class="hash-link" aria-label="1. å¯åŠ¨å¤–éƒ¨æœåŠ¡çš„ç›´æ¥é“¾æ¥" title="1. å¯åŠ¨å¤–éƒ¨æœåŠ¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p>åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°†å¯åŠ¨ PostHog å·¥ä½œæ‰€éœ€çš„æ‰€æœ‰å¤–éƒ¨æœåŠ¡ã€‚</p>
<p>é¦–å…ˆï¼Œå°† <code>127.0.0.1 kafka clickhouse</code> è¡Œæ·»åŠ åˆ° <code>/etc/hosts</code> ä¸­ã€‚å¦‚æœæ²¡æœ‰è¿™äº›æ˜ å°„çš„ä¸»æœºï¼Œæˆ‘ä»¬çš„ ClickHouse å’Œ Kafka æ•°æ®æœåŠ¡å°†æ— æ³•ç›¸äº’é€šä¿¡ã€‚
ä½ å¯ä»¥ä½¿ç”¨ä¸€è¡Œå‘½ä»¤å®Œæˆæ­¤æ“ä½œï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;127.0.0.1 kafka clickhouse&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tee</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> /etc/hosts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è¾ƒæ–°ç‰ˆæœ¬ï¼ˆ&gt;=4.1ï¼‰çš„ Podman è€Œä¸æ˜¯ Dockerï¼Œä¸»æœºçš„ <code>/etc/hosts</code> é»˜è®¤ç”¨ä½œå®¹å™¨çš„åŸºç¡€ hosts æ–‡ä»¶ï¼Œè€Œä¸æ˜¯åƒ Docker ä¸­é‚£æ ·ä½¿ç”¨å®¹å™¨çš„ <code>/etc/hosts</code>ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´ ClickHouse å®¹å™¨ä¸­çš„ä¸»æœºåè§£æå¤±è´¥ï¼Œå¯ä»¥é€šè¿‡åœ¨ <a href="https://github.com/containers/common/blob/main/docs/containers.conf.5.md#containers-table" target="_blank" rel="noopener noreferrer"><code>containers.conf</code></a> ä¸­è®¾ç½® <code>base_hosts_file=&quot;none&quot;</code> æ¥è§£å†³ã€‚</p>
</blockquote>
<p>ç°åœ¨ï¼Œå¯åŠ¨ Docker Compose å †æ ˆï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> compose </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> docker-compose.dev.yml up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>å‹æƒ…æç¤º 1ï¼š</strong> å¦‚æœä½ çœ‹åˆ° <code>Error while fetching server API version: 500 Server Error for http+docker://localhost/version:</code>ï¼Œå¾ˆå¯èƒ½æ˜¯ Docker Engine æ²¡æœ‰è¿è¡Œã€‚</p>
</blockquote>
<blockquote>
<p><strong>å‹æƒ…æç¤º 2ï¼š</strong> å¦‚æœä½ åœ¨ä»»ä½•åœ°æ–¹çœ‹åˆ°&quot;Exit Code 137&quot;ï¼Œè¿™æ„å‘³ç€å®¹å™¨å†…å­˜ä¸è¶³ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨ OrbStack è®¾ç½®ä¸­åˆ†é…æ›´å¤šçš„ RAMã€‚</p>
</blockquote>
<blockquote>
<p><strong>å‹æƒ…æç¤º 3ï¼š</strong> åœ¨ Linux ä¸Šï¼Œä½ å¯èƒ½éœ€è¦ <code>sudo</code> â€“ å‚è§ <a href="https://docs.docker.com/engine/install/linux-postinstall" target="_blank" rel="noopener noreferrer">Docker æ–‡æ¡£å…³äºä»¥é root ç”¨æˆ·ç®¡ç† Docker</a>ã€‚æˆ–è€…è€ƒè™‘ä½¿ç”¨ <a href="https://podman.io/getting-started/installation" target="_blank" rel="noopener noreferrer">Podman</a> ä½œä¸ºæ”¯æŒæ— æ ¹å®¹å™¨çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
</blockquote>
<blockquote>
<p><strong>å‹æƒ…æç¤º 4ï¼š</strong> å¦‚æœä½ çœ‹åˆ° <code>Error: (HTTP code 500) server error - Ports are not available: exposing port TCP 0.0.0.0:5432 -&gt; 0.0.0.0:0: listen tcp 0.0.0.0:5432: bind: address already in use</code>ï¼Œè¯´æ˜æŸå¤„å·²ç»è¿è¡Œäº† Postgresã€‚å…ˆå°è¯• <code>docker compose -f docker-compose.dev.yml</code>ï¼Œæˆ–è€…è¿è¡Œ <code>lsof -i :5432</code> æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹æ­£åœ¨ä½¿ç”¨æ­¤ç«¯å£ã€‚</p>
</blockquote>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> postgresql stop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å…¶æ¬¡ï¼Œé€šè¿‡ <code>docker ps</code> å’Œ <code>docker logs</code>ï¼ˆæˆ–é€šè¿‡ OrbStack ä»ªè¡¨æ¿ï¼‰éªŒè¯æ‰€æœ‰è¿™äº›æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚å®ƒä»¬çš„æ—¥å¿—åº”è¯¥æ˜¾ç¤ºç±»ä¼¼è¿™æ ·çš„å†…å®¹ï¼š</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># docker ps                                                                                     NAMES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONTAINER ID   IMAGE                                      COMMAND                  CREATED          STATUS                    PORTS                                                                                            NAMES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5a38d4e55447   temporalio/ui:2.10.3                       </span><span class="token string" style="color:#e3116c">&quot;./start-ui-server.sh&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">44</span><span class="token plain"> seconds             </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:8081-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">/tcp                                                                           posthog-temporal-ui-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">89b969801426   temporalio/admin-tools:1.20.0              </span><span class="token string" style="color:#e3116c">&quot;tail -f /dev/null&quot;</span><span class="token plain">      </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">44</span><span class="token plain"> seconds                                                                                                              posthog-temporal-admin-tools-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">81fd1b6d7b1b   clickhouse/clickhouse-server:23.6.1.1524   </span><span class="token string" style="color:#e3116c">&quot;/entrypoint.sh&quot;</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> seconds             </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:8123-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">8123</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:9000-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">9000</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:9009-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">9009</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:9440-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">9440</span><span class="token plain">/tcp   posthog-clickhouse-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f876f8bff35f   bitnami/kafka:2.8.1-debian-10-r99          </span><span class="token string" style="color:#e3116c">&quot;/opt/bitnami/scriptâ€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> seconds             </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:9092-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">9092</span><span class="token plain">/tcp                                                                           posthog-kafka-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d22559261575   temporalio/auto-setup:1.20.0               </span><span class="token string" style="color:#e3116c">&quot;/etc/temporal/entryâ€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">45</span><span class="token plain"> seconds             </span><span class="token number" style="color:#36acaa">6933</span><span class="token plain">-6935/tcp, </span><span class="token number" style="color:#36acaa">6939</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">7234</span><span class="token plain">-7235/tcp, </span><span class="token number" style="color:#36acaa">7239</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:7233-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">7233</span><span class="token plain">/tcp                         posthog-temporal-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5313fc278a70   postgres:12-alpine                         </span><span class="token string" style="color:#e3116c">&quot;docker-entrypoint.sâ€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> seconds </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">healthy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:5432-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">5432</span><span class="token plain">/tcp                                                                           posthog-db-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c04358d8309f   zookeeper:3.7.0                            </span><span class="token string" style="color:#e3116c">&quot;/docker-entrypoint.â€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> seconds             </span><span class="token number" style="color:#36acaa">2181</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">2888</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">3888</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">/tcp                                                           posthog-zookeeper-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">09add699866e   maildev/maildev:2.0.5                      </span><span class="token string" style="color:#e3116c">&quot;bin/maildev&quot;</span><span class="token plain">            </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> seconds </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">healthy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:1025-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">1025</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:1080-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">1080</span><span class="token plain">/tcp                                                   posthog-maildev-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">61a44c094753   elasticsearch:7.16.2                       </span><span class="token string" style="color:#e3116c">&quot;/bin/tini -- /usr/lâ€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> seconds             </span><span class="token number" style="color:#36acaa">9200</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">9300</span><span class="token plain">/tcp                                                                               posthog-elasticsearch-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a478cadf6911   minio/minio:RELEASE.2022-06-25T15-50-16Z   </span><span class="token string" style="color:#e3116c">&quot;sh -c &#x27;mkdir -p /daâ€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> seconds             </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:19000-19001-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">19000</span><span class="token plain">-19001/tcp                                                   posthog-object_storage-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">91f838afe40e   redis:6.2.7-alpine                         </span><span class="token string" style="color:#e3116c">&quot;docker-entrypoint.sâ€¦&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> seconds             </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:6379-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">6379</span><span class="token plain">/tcp                                                                           posthog-redis-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># docker logs posthog-db-1 -n 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2021</span><span class="token plain">-12-06 </span><span class="token number" style="color:#36acaa">13</span><span class="token plain">:47:08.325 UTC </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> LOG:  database system is ready to accept connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># docker logs posthog-redis-1 -n 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token plain">:M 06 Dec </span><span class="token number" style="color:#36acaa">2021</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token plain">:47:08.435 * Ready to accept connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># docker logs posthog-clickhouse-1 -n 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Saved preprocessed configuration to </span><span class="token string" style="color:#e3116c">&#x27;/var/lib/clickhouse/preprocessed_configs/users.xml&#x27;</span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ClickHouse writes logs to `/var/log/clickhouse-server/clickhouse-server.log` and error logs to `/var/log/clickhouse-server/clickhouse-server.err.log` instead of stdout/stsderr. It can be useful to `cat` these files if there are any issues:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># docker exec posthog-clickhouse-1 cat /var/log/clickhouse-server/clickhouse-server.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># docker exec posthog-clickhouse-1 cat /var/log/clickhouse-server/clickhouse-server.err.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># docker logs posthog-kafka-1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2021</span><span class="token plain">-12-06 </span><span class="token number" style="color:#36acaa">13</span><span class="token plain">:47:23,814</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> INFO </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">KafkaServer </span><span class="token assign-left variable" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1001</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> started </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kafka.server.KafkaServer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># docker logs posthog-zookeeper-1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Because ClickHouse and Kafka connect to Zookeeper, there will be a lot of noise here. That&#x27;s good.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>å‹æƒ…æç¤ºï¼š</strong> Kafka ç›®å‰æ˜¯å”¯ä¸€ä½¿ç”¨çš„ x86 å®¹å™¨ï¼Œåœ¨ ARM ä¸Šè¿è¡Œæ—¶å¯èƒ½ä¼šéšæœºå´©æºƒã€‚é‡å¯å®ƒï¼Œå½“å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ã€‚</p>
</blockquote>
<p>æœ€åï¼Œåœ¨æœ¬åœ°å®‰è£… Postgresã€‚å³ä½¿ä½ è®¡åˆ’åœ¨ Docker ä¸­è¿è¡Œ Postgresï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æœ¬åœ°å®‰è£… Postgresï¼ˆ11+ ç‰ˆæœ¬ï¼‰æ¥è·å–å…¶ CLI å·¥å…·å’Œå¼€å‘åº“/å¤´æ–‡ä»¶ã€‚è¿™äº›æ˜¯ <code>pip</code> å®‰è£… <code>psycopg2</code> æ‰€å¿…éœ€çš„ã€‚</p>
<ul>
<li>åœ¨ macOS ä¸Šï¼š<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> postgresql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>è¿™ä¼šåŒæ—¶å®‰è£… Postgres æœåŠ¡å™¨å’Œå…¶å·¥å…·ã€‚è¿è¡Œæ­¤å‘½ä»¤åä¸è¦å¯åŠ¨æœåŠ¡å™¨ã€‚</p>
<ul>
<li>åœ¨åŸºäº Debian çš„ Linux ä¸Šï¼š<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> postgresql-client postgresql-contrib libpq-dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>è¿™æœ‰æ„åªå®‰è£… Postgres å®¢æˆ·ç«¯å’Œé©±åŠ¨ç¨‹åºï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨ã€‚å¦‚æœä½ æƒ³å®‰è£…æœåŠ¡å™¨ï¼Œæˆ–è€…å·²ç»å®‰è£…äº†æœåŠ¡å™¨ï¼Œä½ éœ€è¦åœæ­¢å®ƒï¼Œå› ä¸ºå®ƒä½¿ç”¨çš„ TCP ç«¯å£ä¸ Postgres Docker å®¹å™¨ä½¿ç”¨çš„ç«¯å£å†²çªã€‚åœ¨ Linux ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ <code>sudo systemctl disable postgresql.service</code> æ¥å®Œæˆæ­¤æ“ä½œã€‚</p>
<p>åœ¨ Linux ä¸Šï¼Œä½ é€šå¸¸æœ‰å•ç‹¬çš„åŒ…ï¼š<code>postgres</code> ç”¨äºå·¥å…·ï¼Œ<code>postgres-server</code> ç”¨äºæœåŠ¡å™¨ï¼Œ<code>libpostgres-dev</code> ç”¨äº <code>psycopg2</code> ä¾èµ–é¡¹ã€‚æŸ¥çœ‹ä½ çš„å‘è¡Œç‰ˆçš„åŒ…åˆ—è¡¨ä»¥è·å–æœ€æ–°çš„åŒ…åˆ—è¡¨ã€‚</p>
<p>å¦‚æœä½ çš„å·¥ä½œç«™æ˜¯ Apple Silicon Macï¼Œç¬¬ä¸€æ¬¡è¿è¡Œ <code>pip install</code> æ—¶ï¼Œä½ å¿…é¡»è®¾ç½®è‡ªå®šä¹‰ OpenSSL å¤´ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> openssl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">CFLAGS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;-I /opt/homebrew/opt/openssl/include </span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable" style="color:#36acaa">python3.11-config </span><span class="token string variable parameter variable" style="color:#36acaa">--includes</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">LDFLAGS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;-L /opt/homebrew/opt/openssl/lib&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">GRPC_PYTHON_BUILD_SYSTEM_OPENSSL</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">GRPC_PYTHON_BUILD_SYSTEM_ZLIB</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> uv pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è¿™äº›å°†åœ¨å®‰è£… <code>grpcio</code> å’Œ <code>psycopg2</code> æ—¶ä½¿ç”¨ã€‚å®Œæˆæ­¤æ“ä½œä¸€æ¬¡åï¼Œå‡è®¾è¿™ä¸¤ä¸ªåŒ…æ²¡æœ‰ä»»ä½•æ›´æ”¹ï¼Œä¸‹æ¬¡åªéœ€è¿è¡Œï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uv pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> requirements.txt </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> requirements-dev.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-å‡†å¤‡-django-æœåŠ¡å™¨">5. å‡†å¤‡ Django æœåŠ¡å™¨<a href="#5-å‡†å¤‡-django-æœåŠ¡å™¨" class="hash-link" aria-label="5. å‡†å¤‡ Django æœåŠ¡å™¨çš„ç›´æ¥é“¾æ¥" title="5. å‡†å¤‡ Django æœåŠ¡å™¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<ol>
<li>
<p>å®‰è£…ä¸€äº› SAML å·¥ä½œæ‰€éœ€çš„ä¾èµ–é¡¹ã€‚å¦‚æœä½ ä½¿ç”¨ macOSï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¦åˆ™æŸ¥çœ‹å®˜æ–¹ <a href="https://github.com/mehcode/python-xmlsec" target="_blank" rel="noopener noreferrer">xmlsec ä»“åº“</a>äº†è§£æ›´å¤šè¯¦æƒ…ã€‚</p>
<ul>
<li>
<p>åœ¨ macOS ä¸Šï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> libxml2 libxmlsec1 pkg-config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>å¦‚æœå®‰è£… <code>xmlsec</code> ä¸æˆåŠŸï¼Œå°è¯•æ›´æ–° macOS åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆSonomaï¼‰ã€‚</p>
</blockquote>
</li>
<li>
<p>åœ¨åŸºäº Debian çš„ Linux ä¸Šï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> libxml2 libxmlsec1-dev libffi-dev pkg-config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p>å®‰è£… Python 3.11ã€‚</p>
<ul>
<li>
<p>åœ¨ macOS ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ Homebrewï¼š<code>brew install python@3.11</code>ã€‚</p>
</li>
<li>
<p>åœ¨åŸºäº Debian çš„ Linux ä¸Šï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> add-apt-repository ppa:deadsnakes/ppa </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> python3.11 python3.11-venv python3.11-dev </span><span class="token parameter variable" style="color:#36acaa">-y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ol>
<p>ç¡®ä¿åœ¨ <code>venv</code> å¤–éƒ¨æ—¶å§‹ç»ˆä½¿ç”¨ <code>python3</code> è€Œä¸æ˜¯ <code>python</code>ï¼Œå› ä¸ºåè€…åœ¨æŸäº›ç³»ç»Ÿä¸Šå¯èƒ½æŒ‡å‘ Python 2.xã€‚å¦‚æœå®‰è£…å¤šä¸ªç‰ˆæœ¬çš„ Python 3ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>deadsnakes</code> PPAï¼Œä½¿ç”¨ <code>python3.11</code> è€Œä¸æ˜¯ <code>python3</code>ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://github.com/pyenv/pyenv" target="_blank" rel="noopener noreferrer">pyenv</a>ï¼Œå¦‚æœä½ å¸Œæœ›åœ¨åŒä¸€å°æœºå™¨ä¸Šç®¡ç†å¤šä¸ª Python 3 ç‰ˆæœ¬ã€‚</p>
<ol start="3">
<li>å®‰è£… <code>uv</code></li>
</ol>
<p><code>uv</code> æ˜¯ä¸€ä¸ªéå¸¸å¿«é€Ÿçš„å·¥å…·ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥ç®¡ç† python è™šæ‹Ÿç¯å¢ƒå’Œä¾èµ–é¡¹ã€‚æŸ¥çœ‹ <a href="https://docs.astral.sh/uv/" target="_blank" rel="noopener noreferrer">https://docs.astral.sh/uv/</a>ã€‚å®‰è£…åï¼Œä½ å¯ä»¥åœ¨ä»»ä½• <code>pip</code> å‘½ä»¤å‰åŠ ä¸Š <code>uv</code> æ¥è·å¾—é€Ÿåº¦æå‡ã€‚</p>
<ol start="4">
<li>
<p>åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºåä¸º &#x27;env&#x27; çš„è™šæ‹Ÿç¯å¢ƒï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uv venv </span><span class="token function" style="color:#d73a49">env</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--python</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3.11</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># å¯¹äº bash/zsh/ç­‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">source</span><span class="token plain"> env/bin/activate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># å¯¹äº fish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">source</span><span class="token plain"> env/bin/activate.fish</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>å°† pip å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uv pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-U</span><span class="token plain"> pip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>ä½¿ç”¨ pip å®‰è£…ä¾èµ–é¡¹</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="6-å‡†å¤‡æ•°æ®åº“">6. å‡†å¤‡æ•°æ®åº“<a href="#6-å‡†å¤‡æ•°æ®åº“" class="hash-link" aria-label="6. å‡†å¤‡æ•°æ®åº“çš„ç›´æ¥é“¾æ¥" title="6. å‡†å¤‡æ•°æ®åº“çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p>æˆ‘ä»¬ç°åœ¨å·²ç»å‡†å¤‡å¥½äº†åç«¯ï¼Œå¹¶ä¸” Postgres å’Œ ClickHouse æ­£åœ¨è¿è¡Œ â€“ ä½†æ˜¯è¿™äº›æ•°æ®åº“ç›®å‰æ˜¯ç©ºç™½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿è¡Œ_è¿ç§»_æ¥åˆ›å»ºæ‰€æœ‰è¡¨ç­‰ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cargo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> sqlx-cli </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">DEBUG</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> ./bin/migrate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="7-å¯åŠ¨-posthog">7. å¯åŠ¨ PostHog<a href="#7-å¯åŠ¨-posthog" class="hash-link" aria-label="7. å¯åŠ¨ PostHogçš„ç›´æ¥é“¾æ¥" title="7. å¯åŠ¨ PostHogçš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p>ç°åœ¨åŒæ—¶å¯åŠ¨ PostHog çš„æ‰€æœ‰ç»„ä»¶ï¼ˆåç«¯ã€workerã€æ’ä»¶æœåŠ¡å™¨å’Œå‰ç«¯ï¼‰ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./bin/start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> æ­¤å‘½ä»¤ä½¿ç”¨ <a href="https://github.com/pvolok/mprocs" target="_blank" rel="noopener noreferrer">mprocs</a> åœ¨å•ä¸ªç»ˆç«¯çª—å£ä¸­è¿è¡Œæ‰€æœ‰å¼€å‘è¿›ç¨‹ã€‚</p>
</blockquote>
<p>æ‰“å¼€ <a href="http://localhost:8010" target="_blank" rel="noopener noreferrer">http://localhost:8010</a> æŸ¥çœ‹åº”ç”¨ç¨‹åºã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> ç¬¬ä¸€æ¬¡è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼Œä½ å¯èƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œè¯´&quot;layout.html is not defined&quot;ã€‚è¯·ç¡®ä¿ç­‰å¾…å‰ç«¯ç¼–è¯‘å®Œæˆåå†è¯•ä¸€æ¬¡ã€‚</p>
</blockquote>
<p>è¦åœ¨ä½ å…¨æ–°çš„ PostHog å®ä¾‹ä¸­è·å–ä¸€äº›å®ç”¨çš„æµ‹è¯•æ•°æ®ï¼Œè¿è¡Œ <code>DEBUG=1 ./manage.py generate_demo_data</code>ã€‚è¦æŸ¥çœ‹å‘½ä»¤çš„æœ‰ç”¨å‚æ•°åˆ—è¡¨ï¼Œè¿è¡Œ <code>DEBUG=1 ./manage.py generate_demo_data --help</code>ã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="8-å¼€å‘">8. å¼€å‘<a href="#8-å¼€å‘" class="hash-link" aria-label="8. å¼€å‘çš„ç›´æ¥é“¾æ¥" title="8. å¼€å‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p>å°±æ˜¯è¿™æ ·ï¼ä½ ç°åœ¨å¯ä»¥æŒ‰ç…§ä½ æƒ³è¦çš„æ–¹å¼ä¿®æ”¹ PostHogã€‚æŸ¥çœ‹<a href="/posthog-guide/handbook/engineering/project-structure">é¡¹ç›®ç»“æ„</a>äº†è§£ä»“åº“å†…å®¹çš„ä»‹ç»ã€‚è¦æäº¤æ›´æ”¹ï¼Œè¯·åŸºäº <code>master</code> åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ç”¨äºä½ çš„é¢„æœŸæ›´æ”¹ï¼Œç„¶åå¼€å§‹å¼€å‘ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="æµ‹è¯•">æµ‹è¯•<a href="#æµ‹è¯•" class="hash-link" aria-label="æµ‹è¯•çš„ç›´æ¥é“¾æ¥" title="æµ‹è¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>è¦åˆå¹¶ PostHog PRï¼Œæ‰€æœ‰æµ‹è¯•éƒ½å¿…é¡»é€šè¿‡ï¼Œç†æƒ³æƒ…å†µä¸‹ä½ è¿˜åº”è¯¥å¼•å…¥æ–°çš„æµ‹è¯• - è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¿…é¡»èƒ½å¤Ÿè½»æ¾è¿è¡Œæµ‹è¯•ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ç«¯">å‰ç«¯<a href="#å‰ç«¯" class="hash-link" aria-label="å‰ç«¯çš„ç›´æ¥é“¾æ¥" title="å‰ç«¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¯¹äºå‰ç«¯å•å…ƒæµ‹è¯•ï¼Œè¿è¡Œï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">pnpm</span><span class="token plain"> test:unit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä½ å¯ä»¥å°†è¿è¡ŒèŒƒå›´ç¼©å°åˆ°ä»…åŒ¹é…è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">pnpm</span><span class="token plain"> jest </span><span class="token parameter variable" style="color:#36acaa">--testPathPattern</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">frontend/src/lib/components/IntervalFilter/intervalFilterLogic.test.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è¦æ›´æ–°æ‰€æœ‰è§†è§‰å›å½’æµ‹è¯•å¿«ç…§ï¼Œè¯·ç¡®ä¿ Storybook åœ¨ä½ çš„æœºå™¨ä¸Šè¿è¡Œï¼ˆä½ å¯ä»¥åœ¨å•ç‹¬çš„ç»ˆç«¯æ ‡ç­¾ä¸­ä½¿ç”¨ <code>pnpm storybook</code> å¯åŠ¨å®ƒï¼‰ã€‚ä½ å¯èƒ½è¿˜éœ€è¦ä½¿ç”¨ <code>pnpm exec playwright install</code> å®‰è£… Playwrightã€‚ç„¶åè¿è¡Œï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">pnpm</span><span class="token plain"> test:visual</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è¦ä»…æ›´æ–°ç‰¹å®šè·¯å¾„ä¸‹çš„æ•…äº‹çš„å¿«ç…§ï¼Œè¿è¡Œï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">pnpm</span><span class="token plain"> test:visual:update frontend/src/lib/Example.stories.tsx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="åç«¯">åç«¯<a href="#åç«¯" class="hash-link" aria-label="åç«¯çš„ç›´æ¥é“¾æ¥" title="åç«¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¯¹äºåç«¯æµ‹è¯•ï¼Œè¿è¡Œï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pytest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä½ å¯ä»¥å°†è¿è¡ŒèŒƒå›´ç¼©å°åˆ°ä»…åŒ¹é…è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pytest posthog/test/test_example.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æˆ–è€…ä»…æµ‹è¯•åŒ¹é…å‡½æ•°åçš„æµ‹è¯•ç”¨ä¾‹ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pytest posthog/test/test_example.py </span><span class="token parameter variable" style="color:#36acaa">-k</span><span class="token plain"> test_something</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è¦æŸ¥çœ‹è°ƒè¯•æ—¥å¿—ï¼ˆå¦‚ ClickHouse æŸ¥è¯¢ï¼‰ï¼Œæ·»åŠ å‚æ•° <code>--log-cli-level=DEBUG</code>ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç«¯åˆ°ç«¯">ç«¯åˆ°ç«¯<a href="#ç«¯åˆ°ç«¯" class="hash-link" aria-label="ç«¯åˆ°ç«¯çš„ç›´æ¥é“¾æ¥" title="ç«¯åˆ°ç«¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¯¹äº Cypress ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œè¿è¡Œ <code>bin/e2e-test-runner</code>ã€‚è¿™å°†å¯åŠ¨ä¸€ä¸ª PostHog çš„æµ‹è¯•å®ä¾‹å¹¶æ˜¾ç¤º Cypress ç•Œé¢ï¼Œä½ å¯ä»¥ä»ä¸­æ‰‹åŠ¨é€‰æ‹©è¦è¿è¡Œçš„æµ‹è¯•ã€‚ä½ éœ€è¦å®‰è£… <code>uv</code>ï¼ˆPython åŒ…ç®¡ç†å™¨ï¼‰ï¼Œä½ å¯ä»¥é€šè¿‡ <code>brew install uv</code> æ¥å®‰è£…ã€‚å®Œæˆåï¼Œä½¿ç”¨ Cmd + C ç»ˆæ­¢å‘½ä»¤ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é¢å¤–ä½¿ç”¨ç‰¹æ€§æ ‡å¿—">é¢å¤–ï¼šä½¿ç”¨ç‰¹æ€§æ ‡å¿—<a href="#é¢å¤–ä½¿ç”¨ç‰¹æ€§æ ‡å¿—" class="hash-link" aria-label="é¢å¤–ï¼šä½¿ç”¨ç‰¹æ€§æ ‡å¿—çš„ç›´æ¥é“¾æ¥" title="é¢å¤–ï¼šä½¿ç”¨ç‰¹æ€§æ ‡å¿—çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>å½“ä½¿ç”¨ç¯å¢ƒå˜é‡ <code>DEBUG=1</code>ï¼ˆå¯ç”¨åä¸º <code>SELF_CAPTURE</code> çš„è®¾ç½®ï¼‰åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œ
ä½ çš„æœ¬åœ° PostHog å®ä¾‹ä¸­çš„æ‰€æœ‰åˆ†æéƒ½åŸºäºè¯¥å®ä¾‹æœ¬èº« - æ›´å…·ä½“åœ°è¯´ï¼Œæ˜¯åŸºäºå½“å‰é€‰æ‹©çš„é¡¹ç›®ã€‚
è¿™æ„å‘³ç€ä½ çš„æ´»åŠ¨ä¼šç«‹å³åæ˜ åœ¨å½“å‰é¡¹ç›®ä¸­ï¼Œè¿™å¯¹äºæµ‹è¯•åŠŸèƒ½å¯èƒ½å¾ˆæœ‰ç”¨</p>
<ul>
<li>ä¾‹å¦‚ï¼Œå½“å‰å¼€å‘å®ä¾‹å¯ç”¨å“ªäº›ç‰¹æ€§æ ‡å¿—æ˜¯ç”±ä½ åŒæ—¶æ‰“å¼€çš„é¡¹ç›®å†³å®šçš„ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œå½“ä½¿ç”¨åŸºäºç‰¹æ€§æ ‡å¿— <code>foo-bar</code> çš„åŠŸèƒ½æ—¶ï¼Œ<a href="http://localhost:8010/feature_flags/new" target="_blank" rel="noopener noreferrer">åœ¨ä½ çš„æœ¬åœ°å®ä¾‹ä¸­æ·»åŠ å…·æœ‰æ­¤é”®çš„ç‰¹æ€§æ ‡å¿—</a>å¹¶åœ¨é‚£é‡Œå‘å¸ƒå®ƒã€‚</p>
<p>å¦‚æœä½ æƒ³ç«‹å³æ‹¥æœ‰ PostHog ä¸­å­˜åœ¨çš„æ‰€æœ‰ç‰¹æ€§æ ‡å¿—ï¼Œè¿è¡Œ <code>DEBUG=1 python3 manage.py sync_feature_flags</code> - å®ƒä»¬å°†è¢«æ·»åŠ åˆ°å®ä¾‹ä¸­çš„æ¯ä¸ªé¡¹ç›®ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹å®Œå…¨å±•å¼€ã€‚</p>
<p>æ­¤å‘½ä»¤ä¼šè‡ªåŠ¨å°†ä»»ä½•ä»¥ <code>_EXPERIMENT</code> ç»“å°¾çš„ç‰¹æ€§æ ‡å¿—è®¾ç½®ä¸ºå…·æœ‰ <code>control</code> å’Œ <code>test</code> å˜ä½“çš„å¤šå˜é‡æ ‡å¿—ã€‚</p>
<p>åç«¯ä¾§çš„æ ‡å¿—ä»…åœ¨æœ¬åœ°è¯„ä¼°ï¼Œè¿™éœ€è¦è®¾ç½® <code>POSTHOG_PERSONAL_API_KEY</code> ç¯å¢ƒå˜é‡ã€‚åœ¨<a href="http://localhost:8010/settings/user#personal-api-keys" target="_blank" rel="noopener noreferrer">ä½ çš„ç”¨æˆ·è®¾ç½®</a>ä¸­ç”Ÿæˆå¯†é’¥ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é¢å¤–ä½¿ç”¨-vs-code-è°ƒè¯•">é¢å¤–ï¼šä½¿ç”¨ VS Code è°ƒè¯•<a href="#é¢å¤–ä½¿ç”¨-vs-code-è°ƒè¯•" class="hash-link" aria-label="é¢å¤–ï¼šä½¿ç”¨ VS Code è°ƒè¯•çš„ç›´æ¥é“¾æ¥" title="é¢å¤–ï¼šä½¿ç”¨ VS Code è°ƒè¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>PostHog ä»“åº“åŒ…å«äº† <a href="https://github.com/PostHog/posthog/blob/master/.vscode/launch.json" target="_blank" rel="noopener noreferrer">VS Code è°ƒè¯•é€‰é¡¹</a>ã€‚åªéœ€è½¬åˆ° VS Code ä¸­çš„ <code>è¿è¡Œå’Œè°ƒè¯•</code> æ ‡ç­¾ï¼Œé€‰æ‹©ä½ æƒ³è¦è°ƒè¯•çš„æ‰€éœ€æœåŠ¡ï¼Œç„¶åè¿è¡Œå®ƒã€‚ä¸€æ—¦å®ƒå¯åŠ¨ï¼Œä½ å°±å¯ä»¥è®¾ç½®æ–­ç‚¹å¹¶é€æ­¥æ‰§è¡Œä»£ç ï¼Œä»¥å‡†ç¡®äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€‚å¦‚æœä½ é‡åˆ°æ£˜æ‰‹çš„æµ‹è¯•å¤±è´¥ï¼Œè¿˜æœ‰ç”¨äºå‰ç«¯å’Œåç«¯æµ‹è¯•çš„è°ƒè¯•å¯åŠ¨é€‰é¡¹ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> ä½ å¯ä»¥ä½¿ç”¨ä¸»è¦çš„&quot;PostHog&quot;å¯åŠ¨é€‰é¡¹è°ƒè¯•æ‰€æœ‰æœåŠ¡ã€‚å¦åˆ™ï¼Œå¦‚æœä½ ä½¿ç”¨ <code>./bin/start</code> åœ¨æœ¬åœ°è¿è¡Œå¤§å¤šæ•° PostHog æœåŠ¡ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ åªæƒ³è°ƒè¯•åç«¯ï¼Œè¯·ç¡®ä¿æš‚æ—¶ä»<a href="https://github.com/PostHog/posthog/blob/master/bin/start#L22" target="_blank" rel="noopener noreferrer">å¯åŠ¨è„šæœ¬</a>ä¸­æ³¨é‡Šæ‰è¯¥æœåŠ¡ã€‚</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extra-debugging-the-backend-in-pycharm">Extra: Debugging the backend in PyCharm<a href="#extra-debugging-the-backend-in-pycharm" class="hash-link" aria-label="Extra: Debugging the backend in PyCharmçš„ç›´æ¥é“¾æ¥" title="Extra: Debugging the backend in PyCharmçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>å€ŸåŠ© PyCharm å†…ç½®çš„ Django æ”¯æŒï¼Œåœ¨åç«¯è®¾ç½®è°ƒè¯•ç›¸å½“å®¹æ˜“ã€‚å½“ä½ æƒ³è¦è·Ÿè¸ªå’Œè°ƒè¯•ä»å®¢æˆ·ç«¯å‘å‡ºçš„ç½‘ç»œè¯·æ±‚ä¸€ç›´åˆ°æœåŠ¡å™¨æ—¶ï¼Œè¿™ç‰¹åˆ«æœ‰ç”¨ã€‚ä½ å¯ä»¥è®¾ç½®æ–­ç‚¹å¹¶é€æ­¥æ‰§è¡Œä»£ç ï¼Œä»¥å‡†ç¡®äº†è§£åç«¯å¦‚ä½•å¤„ç†ä½ çš„è¯·æ±‚ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è®¾ç½®-pycharm">è®¾ç½® PyCharm<a href="#è®¾ç½®-pycharm" class="hash-link" aria-label="è®¾ç½® PyCharmçš„ç›´æ¥é“¾æ¥" title="è®¾ç½® PyCharmçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<ol>
<li>æ‰“å¼€ä»“åº“æ–‡ä»¶å¤¹ã€‚</li>
<li>è®¾ç½® python è§£é‡Šå™¨ï¼ˆè®¾ç½®... &gt; é¡¹ç›®ï¼šposthog &gt; Python è§£é‡Šå™¨ &gt; æ·»åŠ è§£é‡Šå™¨ï¼‰ï¼šé€‰æ‹©&quot;ç°æœ‰&quot;å¹¶å°†å…¶è®¾ç½®ä¸º <code>path_to_repo/posthog/env/bin/python</code>ã€‚</li>
<li>è®¾ç½® Django æ”¯æŒï¼ˆè®¾ç½®... &gt; è¯­è¨€å’Œæ¡†æ¶ &gt; Djangoï¼‰ï¼š<!-- -->
<ul>
<li>Django é¡¹ç›®æ ¹ç›®å½•ï¼š<code>path_to_repo</code></li>
<li>è®¾ç½®ï¼š<code>posthog/settings/__init__py</code></li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¯åŠ¨è°ƒè¯•ç¯å¢ƒ">å¯åŠ¨è°ƒè¯•ç¯å¢ƒ<a href="#å¯åŠ¨è°ƒè¯•ç¯å¢ƒ" class="hash-link" aria-label="å¯åŠ¨è°ƒè¯•ç¯å¢ƒçš„ç›´æ¥é“¾æ¥" title="å¯åŠ¨è°ƒè¯•ç¯å¢ƒçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<ol>
<li>ä¸è¦æ‰‹åŠ¨è¿è¡Œ <code>docker compose</code>ï¼Œä½ å¯ä»¥æ‰“å¼€ <code>docker-compose.dev.yml</code> æ–‡ä»¶å¹¶ç‚¹å‡» <code>services</code> æ—è¾¹çš„åŒæ’­æ”¾å›¾æ ‡</li>
<li>ä»è¿è¡Œé…ç½®ä¸­é€‰æ‹©ï¼š<!-- -->
<ul>
<li>&quot;PostHog&quot; å¹¶ç‚¹å‡»è°ƒè¯•</li>
<li>&quot;Celery&quot; å¹¶ç‚¹å‡»è°ƒè¯•ï¼ˆå¯é€‰ï¼‰</li>
<li>&quot;Frontend&quot; å¹¶ç‚¹å‡»è¿è¡Œ</li>
<li>&quot;Plugin server&quot; å¹¶ç‚¹å‡»è¿è¡Œ</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extra-accessing-postgres">Extra: Accessing Postgres<a href="#extra-accessing-postgres" class="hash-link" aria-label="Extra: Accessing Postgresçš„ç›´æ¥é“¾æ¥" title="Extra: Accessing Postgresçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½éœ€è¦è¿æ¥åˆ°æ•°æ®åº“æ¥æŸ¥è¯¢æœ¬åœ°æ•°æ®åº“ã€è¿›è¡Œæ›´æ”¹ç­‰ã€‚è¦è¿æ¥åˆ°æ•°æ®åº“ï¼Œè¯·ä½¿ç”¨åƒ pgAdmin è¿™æ ·çš„å·¥å…·å¹¶è¾“å…¥ä»¥ä¸‹è¿æ¥è¯¦ç»†ä¿¡æ¯ï¼š<em>host</em>:<code>localhost</code> <em>port</em>:<code>5432</code> <em>database</em>:<code>posthog</code>, <em>username</em>:<code>posthog</code>, <em>pwd</em>:<code>posthog</code>ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extra-accessing-the-django-admin">Extra: Accessing the Django Admin<a href="#extra-accessing-the-django-admin" class="hash-link" aria-label="Extra: Accessing the Django Adminçš„ç›´æ¥é“¾æ¥" title="Extra: Accessing the Django Adminçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>å¦‚æœä½ æ— æ³•è®¿é—® Django admin <a href="http://localhost:8000/admin/%EF%BC%8C%E5%8F%AF%E8%83%BD%E6%98%AF%E5%9B%A0%E4%B8%BA%E4%BD%A0%E7%9A%84%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7%E6%9C%AA%E8%AE%BE%E7%BD%AE%E4%B8%BA%E5%B7%A5%E4%BD%9C%E4%BA%BA%E5%91%98%E7%94%A8%E6%88%B7%E3%80%82%E4%BD%A0%E5%8F%AF%E4%BB%A5%E8%BF%9E%E6%8E%A5%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E6%89%BE%E5%88%B0%E4%BD%A0%E7%9A%84" target="_blank" rel="noopener noreferrer">http://localhost:8000/admin/ï¼Œå¯èƒ½æ˜¯å› ä¸ºä½ çš„æœ¬åœ°ç”¨æˆ·æœªè®¾ç½®ä¸ºå·¥ä½œäººå‘˜ç”¨æˆ·ã€‚ä½ å¯ä»¥è¿æ¥åˆ°æ•°æ®åº“ï¼Œæ‰¾åˆ°ä½ çš„</a> <code>posthog_user</code> å¹¶å°† <code>is_staff</code> è®¾ç½®ä¸º <code>true</code>ã€‚è¿™åº”è¯¥ä½¿ç®¡ç†é¡µé¢å¯ä»¥è®¿é—®ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é¢å¤–å¼€å‘ä»˜è´¹åŠŸèƒ½ä»…é™-posthog-å‘˜å·¥">é¢å¤–ï¼šå¼€å‘ä»˜è´¹åŠŸèƒ½ï¼ˆä»…é™ PostHog å‘˜å·¥ï¼‰<a href="#é¢å¤–å¼€å‘ä»˜è´¹åŠŸèƒ½ä»…é™-posthog-å‘˜å·¥" class="hash-link" aria-label="é¢å¤–ï¼šå¼€å‘ä»˜è´¹åŠŸèƒ½ï¼ˆä»…é™ PostHog å‘˜å·¥ï¼‰çš„ç›´æ¥é“¾æ¥" title="é¢å¤–ï¼šå¼€å‘ä»˜è´¹åŠŸèƒ½ï¼ˆä»…é™ PostHog å‘˜å·¥ï¼‰çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>å¦‚æœä½ æ˜¯ PostHog å‘˜å·¥ï¼Œä½ å¯ä»¥åœ¨æœ¬åœ°å®ä¾‹ä¸Šè®¿é—®ä»˜è´¹åŠŸèƒ½ï¼Œä»¥ä½¿å¼€å‘æ›´å®¹æ˜“ã€‚<a href="https://github.com/PostHog/billing?tab=readme-ov-file#licensing-your-local-instance" target="_blank" rel="noopener noreferrer">åœ¨æˆ‘ä»¬çš„å†…éƒ¨æŒ‡å—ä¸­äº†è§£å¦‚ä½•æ“ä½œ</a>ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extra-working-with-the-data-warehouse-and-a-mysql-source">Extra: Working with the data warehouse and a MySQL source<a href="#extra-working-with-the-data-warehouse-and-a-mysql-source" class="hash-link" aria-label="Extra: Working with the data warehouse and a MySQL sourceçš„ç›´æ¥é“¾æ¥" title="Extra: Working with the data warehouse and a MySQL sourceçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>å¦‚æœä½ æƒ³å°†æœ¬åœ° MySQL æ•°æ®åº“è®¾ç½®ä¸ºæ•°æ®ä»“åº“çš„æºï¼Œä½ éœ€è¦å®Œæˆä¸€äº›é¢å¤–çš„è®¾ç½®æ­¥éª¤ï¼š</p>
<ol>
<li>è®¾ç½®è¦è¿æ¥çš„æœ¬åœ° MySQL æ•°æ®åº“ã€‚</li>
<li>åœ¨ä½ çš„æœºå™¨ä¸Šå®‰è£… MS SQL é©±åŠ¨ç¨‹åºã€‚</li>
<li>ä¸º Temporal ä»»åŠ¡è¿è¡Œå™¨å®šä¹‰é¢å¤–çš„ç¯å¢ƒå˜é‡ã€‚</li>
</ol>
<p>é¦–å…ˆï¼Œå®‰è£… MySQLï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew services start mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å®‰è£… MySQL åï¼Œåˆ›å»ºæ•°æ®åº“å’Œè¡¨ï¼Œæ’å…¥ä¸€è¡Œæ•°æ®ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå¯ä»¥è¿æ¥çš„ç”¨æˆ·ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATABASE</span><span class="token plain"> posthog_dw_test</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> payments </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token keyword" style="color:#00009f">INT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AUTO_INCREMENT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">timestamp</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> distinct_id </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">255</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> amount </span><span class="token keyword" style="color:#00009f">DECIMAL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> payments </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">timestamp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> distinct_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> amount</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;testuser@example.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">99.99</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USER</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;posthog&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;%&#x27;</span><span class="token plain"> IDENTIFIED </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;posthog&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIVILEGES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> posthog_dw_test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;posthog&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;%&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FLUSH </span><span class="token keyword" style="color:#00009f">PRIVILEGES</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦å®‰è£…ä¸€äº› MS SQL é©±åŠ¨ç¨‹åºï¼Œä»¥ä¾¿ PostHog åº”ç”¨ç¨‹åºè¿æ¥åˆ° MySQL æ•°æ®åº“ã€‚åœ¨ <a href="https://github.com/PostHog/posthog/blob/master/posthog/warehouse/README.md" target="_blank" rel="noopener noreferrer">posthog/warehouse/README.md</a> ä¸­äº†è§£å®Œæ•´è¿‡ç¨‹ã€‚å¦‚æœæ²¡æœ‰é©±åŠ¨ç¨‹åºï¼Œåœ¨å°† SQL æ•°æ®åº“è¿æ¥åˆ°æ•°æ®ä»“åº“æ—¶ï¼Œä½ ä¼šæ”¶åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">symbol not found in flat namespace &#x27;_bcp_batch&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æœ€åï¼Œä½ éœ€è¦å®šä¹‰è¿™äº›ç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿ Temporal ä»»åŠ¡è¿è¡Œå™¨ç›‘è§†æ­£ç¡®çš„é˜Ÿåˆ—å¹¶æŒ‰é¢„æœŸå·¥ä½œï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># åœ¨ #team-data-warehouse ä¸­è¯¢é—®è¿™äº›å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PYTHONUNBUFFERED=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export DJANGO_SETTINGS_MODULE=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export DEBUG=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CLICKHOUSE_SECURE=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export KAFKA_HOSTS=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export DATABASE_URL=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SKIP_SERVICE_VERSION_REQUIREMENTS=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PRINT_SQL=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export BUCKET_URL=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export AIRBYTE_BUCKET_KEY=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export AIRBYTE_BUCKET_SECRET=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export AIRBYTE_BUCKET_REGION=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export AIRBYTE_BUCKET_DOMAIN=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export TEMPORAL_TASK_QUEUE=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export AWS_S3_ALLOW_UNSAFE_RENAME=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HUBSPOT_APP_CLIENT_ID=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export HUBSPOT_APP_CLIENT_SECRET=</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœä½ å°†å®ƒä»¬æ”¾åœ¨ <code>.temporal-worker-settings</code> æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥åœ¨è°ƒç”¨ <code>DEBUG=1 ./bin/start</code> ä¹‹å‰è¿è¡Œ <code>source .temporal-worker-settings</code>ã€‚</p>
<p>è¦éªŒè¯ä¸€åˆ‡æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œï¼š</p>
<ol>
<li>åœ¨ PostHog åº”ç”¨ç¨‹åºä¸­å¯¼èˆªåˆ°&quot;æ•°æ®ç®¡é“&quot;ã€‚</li>
<li>ä½¿ç”¨ä¸Šè¿°è®¾ç½®åˆ›å»ºæ–°çš„ MySQL æºã€‚</li>
<li>åˆ›å»ºæºåï¼Œç‚¹å‡»&quot;MySQL&quot;é¡¹ã€‚åœ¨æ¶æ„è¡¨ä¸­ï¼Œç‚¹å‡»ä¸‰ç‚¹èœå•å¹¶é€‰æ‹©&quot;é‡æ–°åŠ è½½&quot;é€‰é¡¹ã€‚</li>
</ol>
<p>ä½œä¸šè¿è¡Œåï¼Œç‚¹å‡»åŒæ­¥çš„è¡¨ååº”è¯¥ä¼šå¸¦ä½ åˆ°ä½ çš„æ•°æ®ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/pama-lee/posthog-guide/tree/main/docs/ğŸš€ éƒ¨ç½²/developing-locally.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘æ­¤é¡µ</a></div><div class="col lastUpdated_JAkA"></div></div></footer><div style="margin-top:2rem"></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡ä»¶é€‰é¡¹å¡"><a class="pagination-nav__link pagination-nav__link--prev" href="/posthog-guide/docs/ğŸš€ éƒ¨ç½²/cloud-cluster"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">Cloud é›†ç¾¤æ¶æ„</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/posthog-guide/docs/ğŸš€ éƒ¨ç½²/nomad"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">ä½¿ç”¨ Nomad éƒ¨ç½² PostHog</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#posthog-å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„" class="table-of-contents__link toc-highlight">PostHog å†…éƒ¨ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</a></li><li><a href="#é€‰é¡¹ä¸€ä½¿ç”¨-codespaces-å¼€å‘" class="table-of-contents__link toc-highlight">é€‰é¡¹ä¸€ï¼šä½¿ç”¨ Codespaces å¼€å‘</a></li><li><a href="#é€‰é¡¹äºŒæœ¬åœ°å¼€å‘" class="table-of-contents__link toc-highlight">é€‰é¡¹äºŒï¼šæœ¬åœ°å¼€å‘</a><ul><li><a href="#å…ˆå†³æ¡ä»¶" class="table-of-contents__link toc-highlight">å…ˆå†³æ¡ä»¶</a></li><li><a href="#å³æ—¶è®¾ç½®" class="table-of-contents__link toc-highlight">å³æ—¶è®¾ç½®</a></li><li><a href="#æ‰‹åŠ¨è®¾ç½®" class="table-of-contents__link toc-highlight">æ‰‹åŠ¨è®¾ç½®</a></li></ul></li><li><a href="#æµ‹è¯•" class="table-of-contents__link toc-highlight">æµ‹è¯•</a><ul><li><a href="#å‰ç«¯" class="table-of-contents__link toc-highlight">å‰ç«¯</a></li><li><a href="#åç«¯" class="table-of-contents__link toc-highlight">åç«¯</a></li><li><a href="#ç«¯åˆ°ç«¯" class="table-of-contents__link toc-highlight">ç«¯åˆ°ç«¯</a></li></ul></li><li><a href="#é¢å¤–ä½¿ç”¨ç‰¹æ€§æ ‡å¿—" class="table-of-contents__link toc-highlight">é¢å¤–ï¼šä½¿ç”¨ç‰¹æ€§æ ‡å¿—</a></li><li><a href="#é¢å¤–ä½¿ç”¨-vs-code-è°ƒè¯•" class="table-of-contents__link toc-highlight">é¢å¤–ï¼šä½¿ç”¨ VS Code è°ƒè¯•</a></li><li><a href="#extra-debugging-the-backend-in-pycharm" class="table-of-contents__link toc-highlight">Extra: Debugging the backend in PyCharm</a><ul><li><a href="#è®¾ç½®-pycharm" class="table-of-contents__link toc-highlight">è®¾ç½® PyCharm</a></li><li><a href="#å¯åŠ¨è°ƒè¯•ç¯å¢ƒ" class="table-of-contents__link toc-highlight">å¯åŠ¨è°ƒè¯•ç¯å¢ƒ</a></li></ul></li><li><a href="#extra-accessing-postgres" class="table-of-contents__link toc-highlight">Extra: Accessing Postgres</a></li><li><a href="#extra-accessing-the-django-admin" class="table-of-contents__link toc-highlight">Extra: Accessing the Django Admin</a></li><li><a href="#é¢å¤–å¼€å‘ä»˜è´¹åŠŸèƒ½ä»…é™-posthog-å‘˜å·¥" class="table-of-contents__link toc-highlight">é¢å¤–ï¼šå¼€å‘ä»˜è´¹åŠŸèƒ½ï¼ˆä»…é™ PostHog å‘˜å·¥ï¼‰</a></li><li><a href="#extra-working-with-the-data-warehouse-and-a-mysql-source" class="table-of-contents__link toc-highlight">Extra: Working with the data warehouse and a MySQL source</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">æ–‡æ¡£</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/posthog-guide/docs/intro">å…¥é—¨æŒ‡å—</a></li></ul></div><div class="col footer__col"><div class="footer__title">ç¤¾åŒº</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://posthog.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">PostHog å®˜ç½‘<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/PostHog/posthog" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/posthog-guide/blog">åšå®¢</a></li><li class="footer__item"><a href="https://github.com/pama-lee/posthog-guide" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 PostHog æŒ‡å—.</div></div></div></footer></div>
</body>
</html>